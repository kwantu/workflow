(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Workflow = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function Workflow(e,r,i,s){var o=this;if(""===e||void 0===e)throw new Error("A profile id is required.");if("string"!=typeof e)throw new Error("The profile id must be a javascript string.");if(o.profile=e||"",""===r||void 0===r)throw new Error("An app id is required.");if("string"!=typeof r)throw new Error("The app id must be a javascript string.");if(o.app=r||"",""===i||void 0===i)throw new Error("A workflow configuration is required.");"object"!=typeof i?o.config=JSON.parse(i):o.config=i,o.instance=s}var Process=require("./lib/process"),util=require("./lib/utility"),models=require("./lib/models");Workflow.prototype.create=function(){var e=this;return new Promise(function(r,i){if(void 0!==e.instance){var s=util.warn("Instance already exists.",e.instance);r(s)}else{var o=models.instance();o._id=e.profile+":processes",o.version=e.config.version,e.instance=o;var t=util.success("Workflow processes instance created successfully.",e.instance);r(t)}})},Workflow.prototype.initialize=function(e,r){var i=this;return new Promise(function(s,o){var t=[];if(""!==e&&void 0!==e){if(t=i.config.processes.filter(function(r){return r._id===e?r:void 0}),void 0===t[0]._id){var n=util.error("WFConfigError","No valid process definition found with process id: "+e);o(n)}}else t.push(i.config.processes[0]),e=i.config.processes[0]._id;var c=[];c=i.instance.processes.filter(function(r){return r.id===e?r:void 0});var u=c.length,f=u+1,a={id:"",seq:"",subProcesses:[]};a.id=e,a.seq=f,i.instance.processes.push(a),Process.preRequisites(t[0].prerequisites,i).then(function(n){if(n.complete===!0)Process.preActions(t[0].preActions,i).then(function(n){if(n.complete)Process.subProcess(e,t[0].subProcesses[0],1,r,i).then(function(r){if(r.complete){var t=r.res;i.instance.processes.filter(function(r){r.id===e&&r.subProcesses.push(t)});var n=util.success("Process: "+i.config.processes[0]._id+" initialized successfully.");s(n)}else{var c=util.error("WFSubProcessError","Process initialisation failed.");o(c)}},function(e){o(e)});else{var c=util.error("WFPreActionsError","Process pre-actions execution failed.");o(c)}},function(e){o(e)});else{var c=util.error("WFPreRequisitesError","Process pre-requisites execution failed.");o(c)}},function(e){o(e)})})},Workflow.prototype.task=function(e,r){return new Promise(function(r,i){"indicator.markComplete"===e?r("Success"):i("Error")})},Workflow.prototype.transition=function(e,r,i,s,o,t,n){return new Promise(function(c,u){Process.transition(e,r,i,s,o,t,n).then(function(e){var r=util.success("Workflow transitioned to the next step successfully.",o);c(r)},function(e){u(e)})})},module.exports=Workflow;

},{"./lib/models":3,"./lib/process":4,"./lib/utility":5}],2:[function(require,module,exports){
"use strict";function create(e,s){var t=[];return new Promise(function(r,u){util.syncLoop(e.indicators.length,function(r){var u=r.iteration(),c=e.indicators[u]._id,i=e.indicators[u].name.i18n.value,o=s.profile+":"+s.app+":"+c+":0",n={_id:o,category:{term:c,label:i},processes:[]};t.push(n),r.next()},function(){var e=util.success("Form created successfully.",t);r(e)})})}function save(e){var s={complete:!0,data:[]};return new Promise(function(e,t){var r=util.success("Form indicator set saved successfully.",s);e(r)})}function submit(e){var s={complete:!0,data:[]};return new Promise(function(e,t){var r=util.success("Form submitted successfully.",s);e(r)})}function authorise(e){var s={complete:!0,data:[]};return new Promise(function(e,t){var r=util.success("Form authorised successfully.",s);e(r)})}function close(e){var s={complete:!0,data:[]};return new Promise(function(e,t){var r=util.success("Form closed successfully.",s);e(r)})}var util=require("./utility");module.exports={create:create,save:save,submit:submit,authorise:authorise,close:close};

},{"./utility":5}],3:[function(require,module,exports){
"use strict";function instance(){var e={_id:"",version:"",type:"workflowInstance",processes:[]};return e}function configuration(){var e={_id:"1234:mangaungProject",_version:"1.0",type:"workflowConfig",title:{name:{i18n:{_lang:"en",value:"Mangagung project workflow"}},description:{i18n:{_lang:"en",value:"Mangagung project workflow used to manage housing development."}}},identification:{documentation:{i18n:{_lang:"",value:""}},upgradeInformation:{i18n:{_lang:"",value:""}}},variables:{variable:[{_id:"",_dataType:"",_sessionVar:"",_default:"",_value:""}]},roles:{role:[{_id:"",_level:"",name:{i18n:{_lang:"",value:""}},roleMappings:{roleMapping:{_applicationId:"",_roleId:""}},requiredRoles:{requiredRole:{_applicationId:"",_roleId:""}}}]},processes:[{_id:"registration",_seq:"1",name:{i18n:{_lang:"en",value:"Register a project"}},help:{i18n:{_lang:"en",value:"Register a new project"}},variables:[{_id:"",_dataType:"",_sessionVar:"",_default:"",_value:""}],prerequisites:[{_seq:"1",_type:"count",_subject:"monthlyProgress.instance",_operator:"equalTo",_value:"0",message:{i18n:{_lang:"en",value:"The project registration form can't be edited once the monthly progress process has been initiated."}}}],preActions:[{_seq:"",_type:"",funct:{module:"",method:"",params:{param:[]}},rest:{hostId:"",service:"",APIKey:"",format:"",collection:"",endpoint:"",params:{param:[]}}}],subProcesses:[{_id:"spRegistration",_seq:"1",name:{i18n:{_lang:"en",value:"Project Registration Form"}},help:{i18n:{_lang:"en",value:"Register a new project"}},initiate:{_type:"user",maxInstances:"-1",action:{_type:"button",label:"Create"},dates:{valid:{_type:"userSelected",message:{i18n:{_lang:"en",value:"Please select a valid date i.e. the monthly date that the data captured is valid for."}}},due:{_type:"userSelected",message:{i18n:{_lang:"en",value:"Please select a due date i.e. the actual date that the data needs to be captured and authorised by."}}}}},indicators:[{_id:"projectDetail",maxInstances:"1",name:{i18n:{_lang:"en",value:"Project Details"}}},{_id:"projectLocation",maxInstances:"-1",name:{i18n:{_lang:"en",value:"Project Locations"}}},{_id:"developerDetail",maxInstances:"1",name:{i18n:{_lang:"en",value:"Developer Details"}}}],steps:[{_id:"createForm",_seq:"1",_setInstanceStatusTo:"Created",_setStatusMsgTo:"Form created",name:{i18n:{_lang:"en",value:"Create the registration form."}},prerequisites:[{_seq:"",_type:"",_operator:"",_subject:"",_value:"",message:{i18n:{_lang:"en",value:""}}}],actions:[{_seq:"1",_type:"internal",funct:{module:"form",method:"create",type:"newSequence"},transitions:[{_type:"auto",name:{i18n:{_lang:"en",value:""}},goTo:{_type:"nextStep",_stepId:""},_stop:!1}]}]},{_id:"captureForm",_seq:"2",_setStatusTo:"InProgress",_setStatusMsgTo:"User assigned and data capture in progress",name:{i18n:{_lang:"en",value:"Capture"}},prerequisites:[{_seq:"1",_type:"readyToSubmit",_subject:"indicators.complete",_operator:"equalTo",_value:"true",message:{i18n:{_lang:"en",value:"All form indicators have to be marked as complete before submission."}}}],actions:[],task:{assign:{profileRole:{profile:"current",role:"capturer"},"default":""},work:{action:"editForm"},transitions:[{_id:"submitForm",_type:"user",name:{i18n:{_lang:"en",value:"Submit"}},goTo:{_type:"nextStep",_stepId:""},_stop:!1}]}},{_id:"authoriseForm",_seq:"3",_setInstanceStatusTo:"awaitingAuthorisation",_setStatusMsgTo:"Form data submitted, user assigned and form data under review",name:{i18n:{_lang:"en",value:"Review the registration form data."}},prerequisites:[{_seq:"1",_type:"checkRole",_subject:"profileRole",_operator:"equalTo",_value:"authoriser",message:{i18n:{_lang:"en",value:"You have to be an authoriser on the project to approve the form data that has been captured or refer back for further editing."}}}],actions:[],task:{assign:{profileRole:{profile:"current",role:"authoriser"},"default":""},work:{action:"editForm"},transitions:[{_id:"authoriseForm",_type:"user",name:{i18n:{_lang:"en",value:"Authorise"}},goTo:{_type:"nextStep",_stepId:""},_stop:!1},{_id:"revertForm",_type:"user",name:{i18n:{_lang:"en",value:"Refer Back"}},goTo:{_type:"stepId",_stepId:"captureForm"},_stop:!1}]}},{_id:"closeForm",_seq:"5",_setInstanceStatusTo:"Complete",_setStatusMsgTo:"Form locked",name:{i18n:{_lang:"en",value:"Close the registration form."}},actions:[{_seq:"1",_type:"internal",funct:{module:"form",method:"authorise"},transition:[{_type:"auto",name:{i18n:{_lang:"en",value:""}},goTo:{_type:"",_stepId:""},_stop:!0}]}]}]}],postActions:{}}]};return e}function process(){var e={configId:"",instanceId:"",processId:"",subProcessId:"",stepId:"",assignedTo:{userId:"",name:""},token:"",status:"",statusMsg:"",lastUpdated:"",dueDate:""};return e}var util=require("./utility");module.exports={configuration:configuration,instance:instance,process:process};

},{"./utility":5}],4:[function(require,module,exports){
"use strict";function preRequisites(e){var t={complete:!1,data:[]};return new Promise(function(e,s){var i=util.success("Pre-requisites completed successfully.",t);e(i)})}function preRequisite(e,t,s){return new Promise(function(t,s){switch(e._type){case"count":var i={},n=util.success("Mock count successfull.",i);t(n);break;default:var r=util.error("WFPreRequisiteError","Pre-requisite type: "+e._type+" not defined.");s(r)}})}function preActions(e,t){var s={complete:!1,data:[]};return new Promise(function(e,t){var i=util.success("Pre-actions completed successfully.",s);e(i)})}function subProcess(e,t,s,i,n){var r={id:t._id,seq:s,initiated:!1,dates:{created:"",valid:"",due:"",closed:""},complete:!1,indicators:[],step:{id:"",seq:"",status:"",message:"",assignedTo:{userId:"",name:""}}};return new Promise(function(s,o){initiate(t.initiate,i).then(function(a){if(a.complete){r.initiated=!0,r.dates.created=a.res.createdDate,r.dates.valid=a.res.validDate,r.dates.due=a.res.dueDate;var c={id:t._id,name:t.name.i18n.value,indicators:t.indicators};step(e,t._id,r,t.steps[0],0,c,i,n).then(function(e){if(e.complete){var i=util.success("Sub-Process completed successfully.",e.res);s(i)}else{var n=util.error("WFStepError","Step "+t.steps[0]._id+"was not completed successfully.");o(n)}},function(e){o(e)})}else{var u=util.error("WFSubProcessError","Sub-process: "+t._id+" not initiated successfully.");o(u)}},function(e){o(e)})})}function initiate(e,t){var s={complete:!1};return new Promise(function(i,n){switch(e._type){case"user":if(s.createdDate=t.createdDate,"userSelected"===e.dates.valid._type)if(void 0!==t.validDate)s.validDate=t.validDate;else{var r=util.error("WFInitiateError","No valid date passed in - {inputData.validDate}");n(r)}if("userSelected"===e.dates.due._type)if(void 0!==t.dueDate)s.dueDate=t.dueDate;else{var r=util.error("WFInitiateError","No due date passed in - {inputData.dueDate}");n(r)}s.complete=!0;var o=util.success("Sub-Process initiate completed successfully.",s);i(o);break;default:var r=util.error("WFInitiateError","Initiate type: "+e._type+" not defined.");n(r)}})}function step(e,t,s,i,n,r,o,a){return new Promise(function(c,u){if(s.step.id=i._id,s.step.seq=n,s.step.status=i._setInstanceStatusTo,s.step.message=i._setStatusMsgTo,s.step.message=i._setStatusMsgTo,s.step.assignedTo.userId=o.userId,s.step.assignedTo.name=o.name,void 0!==i.actions[0])actions(i.actions,r,a).then(function(r){({id:i._id,seq:n,startDate:o.createdDate,status:i._setInstanceStatusTo,message:i._setStatusMsgTo,assignedTo:{userId:o.userId,name:o.name},comment:o.comment,complete:!1,endDate:""});util.syncLoop(r.res.data[0].form.indicators.length,function(e){var t=e.iteration();({id:r.res.data[0].form.indicators[t].category.term,instances:[{uuid:r.res.data[0].form.indicators[t]._id,key:"",seq:1}]});e.next()},function(){if(0!==i.actions[0].transitions.length)util.syncLoop(i.actions[0].transitions.length,function(n){var r=n.iteration();transition(e,t,i._id,i.actions[0].transitions[r]._id,s,o,a).then(function(e){var t=util.success("Transition step completed successfully.",s);c(t)}).fail(function(e){u(e),n["break"]()}),n.next()});else{var n=util.success("No transitions specified in this step.",s);c(n)}})},function(e){u(e)});else if(void 0!==i.task){var d=util.success("Task awaiting user action.",s);c(d)}else{var l=util.error("WF013");u(l)}})}function actions(e,t,s){var i=[],n={completed:!0,data:[]};return new Promise(function(r,o){util.syncLoop(e.length,function(r){var a=r.iteration();action(e[a],t,s).then(function(e){i.push(e.complete),n.data.push(e.res),r.next()},function(e){o(e),r["break"]()})},function(){if(i.every(Boolean)){n.completed=!0;var e=util.success("Actions completed successfully.",n);r(e)}else{n.completed=!1;util.error("WFActionsError","Action/s for sub-process: "+t.id+" did not complete succeffully.");o(e)}})})}function action(e,t,s){return new Promise(function(i,n){switch(e._id){case"createForm":form.create(t,s).then(function(s){var n={transitions:[],form:{id:t.id,indicators:[]}};n.transitions=e.transitions,n.form.indicators=s.res;var r=util.success(s.message,n);i(r)},function(e){n(e)});break;case"authoriseForm":form.authorise(t,s).then(function(s){var n={transitions:[],form:{id:t.id,indicators:[]}};n.transitions=e.transitions;var r=util.success(s.message,n);i(r)},function(e){n(e)});break;case"closeForm":form.close(t,s).then(function(s){var n={transitions:[],form:{id:t.id,indicators:[]}};n.transitions=e.transitions;var r=util.success(s.message,n);i(r)},function(e){n(e)});break;default:var r=util.error("WFActionError","Action defined with id: "+e._id+" not found.");n(r)}})}function task(e){return"Implementation pending.."}function transition(e,t,s,i,n,r,o){return new Promise(function(a,c){var u=o.config.processes.filter(function(t){return t._id===e?t:void 0}),d=u[0].subProcesses.filter(function(e){return e._id===t?e:void 0}),l=d[0].steps.filter(function(e){return e._id===s?e:void 0}),f={};f=void 0!==l[0].actions[0]?l[0].actions[0].transitions.filter(function(e){return e._id===i?e:void 0}):l[0].task.transitions.filter(function(e){return e._id===i?e:void 0});for(var p=0,m=0;m<d[0].steps.length;m++)d[0].steps[m]._id===s&&(p=m);for(var v={},m=0;m<d[0].steps.length;m++){var _=p+1;m===_&&(v=d[0].steps[m])}switch(f[0]._type){case"auto":if("nextStep"===f[0].goTo._type)step(e,t,n,v,p,{},r,o).then(function(e){var t=util.success("Step transition completed successfully.",e.res);a(t)},function(e){c(e)});else if(f[0]._stop===!0){var y=util.success("All Step transitions have completed successfully.",{});a(y)}break;case"user":if("nextStep"===f[0].goTo._type)step(e,t,n,v,p,{},r,o).then(function(e){var t=util.success("Step transition completed successfully.",e.res);a(t)},function(e){c(e)});else if("stepId"===f[0].goTo._type){for(var h=f[0].goTo._stepId,g=d[0].steps.filter(function(e){return e._id===h?e:void 0}),S=1,m=0;m<d[0].steps.length;m++)d[0].steps[m]._id===h&&(S=m+1);step(e,t,n,g[0],S,{},r,o).then(function(e){var t=util.success("Step transition completed successfully.",e.res);a(t)},function(e){c(e)})}else if(f[0]._stop===!0){var y=util.success("All Step transitions have completed successfully.",{});a(y)}break;default:if(f[0]._stop===!0){var y=util.success("All Step transitions have completed successfully.",{});a(y)}else{var P=util.error("WF005");c(P)}}})}function postActions(e){return"Implementation pending.."}var util=require("./utility"),form=require("./form");module.exports={preRequisites:preRequisites,preActions:preActions,subProcess:subProcess,task:task,transition:transition};

},{"./form":2,"./utility":5}],5:[function(require,module,exports){
"use strict";module.exports={success:function(e,r){var n={complete:!0,message:e,res:r};return n},warn:function(e,r){var n={complete:!0,warning:e,res:r};return console.warn(n),n},error:function(e,r){var n=new Error("");return n.name=e,n.message=r,n},syncLoop:function(e,r,n){var t=0,a=!1,u=!1,s={next:function(){return a&&u&&n?n():void(e>t?(t++,r(s)):(a=!0,n&&n()))},iteration:function(){return t-1},"break":function(e){a=!0,u=e}};return s.next(),s},compare:function(e,r,n){switch(r){case"greaterThan":return e>n;case"lessThan":return n>e;case"greaterThanEqual":return e>=n;case"lessThanEqual":return n>=e;case"equalTo":return e===n;case"notEqualTo":return e!==n}}};

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Vzci9sb2NhbC9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9icmVudGdvcmRvbjAxL2FwcHMvd29ya2Zsb3cvaW5kZXguanMiLCIvVXNlcnMvYnJlbnRnb3Jkb24wMS9hcHBzL3dvcmtmbG93L2xpYi9mb3JtLmpzIiwiL1VzZXJzL2JyZW50Z29yZG9uMDEvYXBwcy93b3JrZmxvdy9saWIvbW9kZWxzLmpzIiwiL1VzZXJzL2JyZW50Z29yZG9uMDEvYXBwcy93b3JrZmxvdy9saWIvcHJvY2Vzcy5qcyIsIi9Vc2Vycy9icmVudGdvcmRvbjAxL2FwcHMvd29ya2Zsb3cvbGliL3V0aWxpdHkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxZQWdDQSxTQUFTLFVBQVMsRUFBUyxFQUFLLEVBQVEsR0FFdkMsR0FBSSxHQUFRLElBRVosSUFBZ0IsS0FBWixHQUE4QixTQUFaLEVBQ2YsS0FBTSxJQUFJLE9BQU0sNEJBQ2IsSUFBd0IsZ0JBQWQsR0FDaEIsS0FBTSxJQUFJLE9BQU0sOENBS3BCLElBSEksRUFBTSxRQUFVLEdBQVcsR0FHbkIsS0FBUixHQUFzQixTQUFSLEVBQ1gsS0FBTSxJQUFJLE9BQU0seUJBQ2IsSUFBb0IsZ0JBQVYsR0FDaEIsS0FBTSxJQUFJLE9BQU0sMENBS2pCLElBSEMsRUFBTSxJQUFNLEdBQU8sR0FHTCxLQUFYLEdBQTRCLFNBQVgsRUFDcEIsS0FBTSxJQUFJLE9BQU0sd0NBQ2EsaUJBQWIsR0FDYixFQUFNLE9BQVMsS0FBSyxNQUFNLEdBRTdCLEVBQU0sT0FBUyxFQUdoQixFQUFNLFNBQVcsRUExRHJCLEdBQUksU0FBVSxRQUFRLGlCQUVsQixLQUFPLFFBQVEsaUJBQ2YsT0FBUyxRQUFRLGVBb0VyQixVQUFTLFVBQVUsT0FBUyxXQUUzQixHQUFJLEdBQVEsSUFFWixPQUFPLElBQUksU0FBUSxTQUFTLEVBQVMs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R0FBVixDQUNSLEtBQUssbUJBQ0osTUFBTyxJQUFXLENBQ25CLEtBQUssZ0JBQ0osTUFBa0IsSUFBWCxDQUNSLEtBQUssVUFDSixNQUFPLEtBQVksQ0FDcEIsS0FBSyxhQUNKLE1BQU8sS0FBWSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbnZhciBQcm9jZXNzID0gcmVxdWlyZSgnLi9saWIvcHJvY2VzcycpO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vbGliL3V0aWxpdHknKTtcbnZhciBtb2RlbHMgPSByZXF1aXJlKCcuL2xpYi9tb2RlbHMnKTtcblxuLypnbG9iYWxzICovXG5cbi8qKiBcbiAqIEt3YW50dSB3b3JrZmxvdyBlbmdpbmVcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9maWxlIC0gUHJvZmlsZSBVVUlEXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ10gLSBXb3JrZmxvdyBjb25maWd1cmF0aW9uXG4gKiBcdEBwYXJhbSB7c3RyaW5nfSBjb25maWcuX2lkIFxuICpcdFdvcmtmbG93IGNvbmZpZ3VyYXRpb24gLyBkZWZpbml0aW9uIElEXG4gKiBAcGFyYW0ge09iamVjdH0gW2luc3RhbmNlXSAtIFdvcmtmbG93IGluc3RhbmNlXG4gKiBcdEBwYXJhbSB7c3RyaW5nfSBpbnN0YW5jZS5faWQgXG4gKlx0V29ya2Zsb3cgaW5zdGFuY2UgSURcbiAqIEBhdXRob3IgQnJlbnQgR29yZG9uXG4gKiBAdmVyc2lvbiAwLjEuMFxuICpcbiAqIEBleGFtcGxlIG5ldyBXb3JrZmxvdygnMTIzNCcsIHt9KVxuICogXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBuZXcgV29ya2Zsb3cgb2JqZWN0XG4gKlxuICogQHRocm93cyBcIkVSUk9SOiBNZXNzYWdlXCJcbiAqXG4gKi9cblxuZnVuY3Rpb24gV29ya2Zsb3cocHJvZmlsZSwgYXBwLCBjb25maWcsIGluc3RhbmNlKXtcblx0Ly9cblx0dmFyIF90aGlzID0gdGhpcztcblx0Ly8gUHJvZmlsZSBJRCB2YWxpZGF0aW9uIGNoZWNrc1xuXHRpZiAocHJvZmlsZSA9PT0gJycgfHwgcHJvZmlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQSBwcm9maWxlIGlkIGlzIHJlcXVpcmVkLicpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mKHByb2ZpbGUpICE9PSAnc3RyaW5nJykge1xuICAgIFx0dGhyb3cgbmV3IEVycm9yKCdUaGUgcHJvZmlsZSBpZCBtdXN0IGJlIGEgamF2YXNjcmlwdCBzdHJpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICBcdF90aGlzLnByb2ZpbGUgPSBwcm9maWxlIHx8ICcnO1xuICAgIH1cbiAgICAvLyBBcHAgSUQgdmFsaWRhdGlvbiBjaGVja3Ncblx0aWYgKGFwcCA9PT0gJycgfHwgYXBwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbiBhcHAgaWQgaXMgcmVxdWlyZWQuJyk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YoYXBwKSAhPT0gJ3N0cmluZycpIHtcbiAgICBcdHRocm93IG5ldyBFcnJvcignVGhlIGFwcCBpZCBtdXN0IGJlIGEgamF2YXNjcmlwdCBzdHJpbmcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICBcdF90aGlzLmFwcCA9IGFwcCB8fCAnJztcbiAgICB9XG4gICAgLy8gV29ya2Zsb3cgY29uZmlndXJhdGlvbiB2YWxpZGF0aW9uIGNoZWNrc1xuICAgIGlmIChjb25maWcgPT09ICcnIHx8IGNvbmZpZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgXHR0aHJvdyBuZXcgRXJyb3IoJ0Egd29ya2Zsb3cgY29uZmlndXJhdGlvbiBpcyByZXF1aXJlZC4nKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihjb25maWcpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBfdGhpcy5jb25maWcgPSBKU09OLnBhcnNlKGNvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICBcdF90aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG4gICAgLy8gV29ya2Zsb3cgaW5zdGFuY2UgdmFsaWRhdGlvbiBjaGVja3NcbiAgICBfdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xufVxuXG4vKiogXG4gKiBDcmVhdGUgYSBuZXcgd29ya2Zsb3cgcHJvY2Vzcy5cbiAqXG4gKiBAZXhhbXBsZSBcbiAqIFdvcmtmbG93LmNyZWF0ZSgpO1xuICpcbiAqIEByZXR1cm4gU3VjY2VzcyAvIGVycm9yIG1lc3NhZ2Ugd2l0aCB0aGUgbmV3bHkgY3JlYXRlZCB3b3JrZmxvdyBwcm9jZXNzZXNcbiAqIGluc3RhbmNlIGRhdGEuXG4gKlxuICovXG5Xb3JrZmxvdy5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKXtcblx0Ly9cblx0dmFyIF90aGlzID0gdGhpcztcblx0Ly8gVXNlIHRoZSBuYXRpdmUgZXM2IFByb21pc2UgY29uc3RydWN0b3Jcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdGlmIChfdGhpcy5pbnN0YW5jZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR2YXIgd2FybiA9IHV0aWwud2FybignSW5zdGFuY2UgYWxyZWFkeSBleGlzdHMuJywgX3RoaXMuaW5zdGFuY2UpXG5cdFx0XHRyZXNvbHZlKHdhcm4pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBDcmVhdGUgdGhlIHdvcmtmbG93IHByb2Nlc3NlcyBpbnN0YW5jZSBvYmplY3Rcblx0XHRcdHZhciBtb2RlbCA9IG1vZGVscy5pbnN0YW5jZSgpO1xuXHRcdFx0bW9kZWwuX2lkID0gX3RoaXMucHJvZmlsZSArICc6cHJvY2Vzc2VzJztcblx0XHRcdG1vZGVsLnZlcnNpb24gPSBfdGhpcy5jb25maWcudmVyc2lvbjtcblx0XHRcdC8vIFVwZGF0ZSB0aGUgcHJvY2Vzc2VzIGFuZCBzdWJQcm9jZXNzZXMgc2VjdGlvbnMgd2l0aCBkZWZhdWx0c1xuXHRcdFx0Ly8gbW9kZWwucHJvY2Vzc2VzWzBdLmlkID0gX3RoaXMuY29uZmlnLnByb2Nlc3Nlc1swXS5faWQ7XG5cdFx0XHQvLyBtb2RlbC5wcm9jZXNzZXNbMF0uc2VxID0gMTtcblx0XHRcdF90aGlzLmluc3RhbmNlID0gbW9kZWw7XG5cdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnV29ya2Zsb3cgcHJvY2Vzc2VzIGluc3RhbmNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LicsIF90aGlzLmluc3RhbmNlKTtcblx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0fVxuXHR9KTtcbn07XG5cbi8qKiBcbiAqIFdvcmtmbG93IGluaXRpYWxpemUsIHRoaXMgZnVuY3Rpb24gZXhlY3V0ZXMgYSBwcm9jZXNzIHdpdGhpbiBhIHdvcmtmbG93XG4gKiBjb25maWd1cmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9jZXNzSWQgLSB0aGUgcHJvY2VzcyBpZCB0byBwcm9jZXNzXG4gKiBAcGFyYW0ge29iamVjdH0gaW5wdXREYXRhIC0gdGhlIGlucHV0IGRhdGEgdG8gcHJvY2Vzc1xuICpcbiAqIEBleGFtcGxlIFxuICogV29ya2Zsb3cuaW5pdGlhbGl6ZSgncHJvY2Vzc0lkJywgeyB2YWxpZERhdGU6ICdkYXRlJyB9KTtcbiAqXG4gKiBAcmV0dXJuIFxuICogeyBjb21wbGV0ZTogdHJ1ZSwgbWVzc2FnZTogJ1Byb2Nlc3M6ICdwcm9jZXNzSWQnIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseS4nLCByZXM6IHVuZGVmaW5lZCB9XG4gKlxuICovXG5Xb3JrZmxvdy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHByb2Nlc3NJZCwgaW5wdXREYXRhKXtcblx0Ly8gUmUtYXNzaWduIHRoaXMgXG5cdHZhciBfdGhpcyA9IHRoaXM7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHR2YXIgY29uZmlnUHJvY2VzcyA9IFtdO1xuXHRcdC8vIENoZWNrIHRoZSBwYXNzZWQgaW4gcGFyYW1ldGVyc1xuXHRcdGlmIChwcm9jZXNzSWQgIT09ICcnICYmIHByb2Nlc3NJZCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgcHJvY2VzcyBjb25maWdcblx0XHRcdGNvbmZpZ1Byb2Nlc3MgPSBfdGhpcy5jb25maWcucHJvY2Vzc2VzLmZpbHRlcihmdW5jdGlvbihvYmpQcm9jZXNzKXtcblx0XHRcdFx0aWYgKG9ialByb2Nlc3MuX2lkID09PSBwcm9jZXNzSWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqUHJvY2Vzcztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoY29uZmlnUHJvY2Vzc1swXS5faWQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR2YXIgZXJyb3IgPSB1dGlsLmVycm9yKCdXRkNvbmZpZ0Vycm9yJywgJ05vIHZhbGlkIHByb2Nlc3MgZGVmaW5pdGlvbiBmb3VuZCB3aXRoIHByb2Nlc3MgaWQ6ICcgKyBwcm9jZXNzSWQpO1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25maWdQcm9jZXNzLnB1c2goX3RoaXMuY29uZmlnLnByb2Nlc3Nlc1swXSk7XG5cdFx0XHRwcm9jZXNzSWQgPSBfdGhpcy5jb25maWcucHJvY2Vzc2VzWzBdLl9pZDtcblx0XHR9XG5cdFx0Ly8gR2V0IHRoZSBjdXJyZW50IGxpc3Qgb2YgcHJvY2VzcyBpbnN0YW5jZXNcblx0XHR2YXIgcHJvY2Vzc1NlcSA9IDE7XG5cdFx0dmFyIGN1cnJlbnRQcm9jZXNzID0gW107XG5cdFx0Y3VycmVudFByb2Nlc3MgPSBfdGhpcy5pbnN0YW5jZS5wcm9jZXNzZXMuZmlsdGVyKGZ1bmN0aW9uKG9ialByb2Nlc3Mpe1xuXHRcdFx0aWYgKG9ialByb2Nlc3MuaWQgPT09IHByb2Nlc3NJZCkge1xuXHRcdFx0XHRyZXR1cm4gb2JqUHJvY2Vzcztcblx0XHRcdH1cblx0XHR9KTtcblx0XHR2YXIgY3VycmVudFNlcSA9IGN1cnJlbnRQcm9jZXNzLmxlbmd0aDtcblx0XHR2YXIgbmV4dFNlcSA9IGN1cnJlbnRTZXEgKyAxO1xuXHRcdC8vIFB1c2ggdGhlIHByb2Nlc3Mgb2JqZWN0IGludG8gdGhlIGFycmF5XG5cdFx0dmFyIHByb2Nlc3NNb2RlbCA9IHtcblx0XHRcdFwiaWRcIjogXCJcIiwgXG5cdCAgICAgIFx0XCJzZXFcIjogXCJcIiwgXG5cdCAgICAgIFx0XCJzdWJQcm9jZXNzZXNcIjogW11cblx0XHR9XG5cdFx0Ly8gMS4gVXBkYXRlIHRoZSBwcm9jZXNzIGlkIGFuZCBzZXFcblx0XHRwcm9jZXNzTW9kZWwuaWQgPSBwcm9jZXNzSWQ7XG5cdFx0cHJvY2Vzc01vZGVsLnNlcSA9IG5leHRTZXE7XG5cdFx0X3RoaXMuaW5zdGFuY2UucHJvY2Vzc2VzLnB1c2gocHJvY2Vzc01vZGVsKTtcblx0XHQvLyAyLiBDb21wbGV0ZSBhbGwgdGhlIHByb2Nlc3MgcHJlcmVxdWlzaXRlc1xuXHRcdFByb2Nlc3MucHJlUmVxdWlzaXRlcyhjb25maWdQcm9jZXNzWzBdLnByZXJlcXVpc2l0ZXMsIF90aGlzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdFx0XHQvLyBDaGVjayBpZiBhbGwgcHJlLXJlcXVpc2l0ZXMgd2VyZSBtZXRcblx0XHRcdGlmIChyZXN1bHQuY29tcGxldGUgPT09IHRydWUpIHtcblx0XHRcdFx0Ly8gMy4gQ29tcGxldGUgYWxsIHRoZSBwcm9jZXNzIHByZS1hY3Rpb25zXG5cdFx0XHRcdFByb2Nlc3MucHJlQWN0aW9ucyhjb25maWdQcm9jZXNzWzBdLnByZUFjdGlvbnMsIF90aGlzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgYWxsIHByZS1hY3Rpb25zIHdlcmUgbWV0XG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5jb21wbGV0ZSkge1xuXHRcdFx0XHRcdFx0Ly8gNC4gSW5pdGlhbGlzZSB0aGUgZmlyc3Qgc3ViLXByb2Nlc3Ncblx0XHRcdFx0XHRcdFByb2Nlc3Muc3ViUHJvY2Vzcyhwcm9jZXNzSWQsIGNvbmZpZ1Byb2Nlc3NbMF0uc3ViUHJvY2Vzc2VzWzBdLCAxLCBpbnB1dERhdGEsIF90aGlzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHN1Yi1wcm9jZXNzIGluaXRpYWxpc2F0aW9uIHdhcyBzdWNjZXNzZnVsbFxuXHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0LmNvbXBsZXRlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gNS4gVXBkYXRlIHRoZSBzdWJQcm9jZXNzIHNlY3Rpb24gZGV0YWlscyBpbiB0aGUgcHJvY2Vzc2VzIG1vZGVsXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHN1YlByb2Nlc3NNb2RlbCA9IHJlc3VsdC5yZXM7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gX3RoaXMuaW5zdGFuY2UucHJvY2Vzc2VzW3Byb2Nlc3NJbmRleF0uc3ViUHJvY2Vzc2VzLnB1c2goc3ViUHJvY2Vzc01vZGVsKTtcblx0XHRcdFx0XHRcdFx0XHRfdGhpcy5pbnN0YW5jZS5wcm9jZXNzZXMuZmlsdGVyKGZ1bmN0aW9uKG9ialByb2Nlc3Mpe1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG9ialByb2Nlc3MuaWQgPT09IHByb2Nlc3NJZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRvYmpQcm9jZXNzLnN1YlByb2Nlc3Nlcy5wdXNoKHN1YlByb2Nlc3NNb2RlbCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MoJ1Byb2Nlc3M6ICcgKyBfdGhpcy5jb25maWcucHJvY2Vzc2VzWzBdLl9pZCArICcgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yID0gdXRpbC5lcnJvcignV0ZTdWJQcm9jZXNzRXJyb3InLCdQcm9jZXNzIGluaXRpYWxpc2F0aW9uIGZhaWxlZC4nKTtcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgZXJyb3IgPSB1dGlsLmVycm9yKCdXRlByZUFjdGlvbnNFcnJvcicsICdQcm9jZXNzIHByZS1hY3Rpb25zIGV4ZWN1dGlvbiBmYWlsZWQuJyk7XG5cdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgZXJyb3IgPSB1dGlsLmVycm9yKCdXRlByZVJlcXVpc2l0ZXNFcnJvcicsICdQcm9jZXNzIHByZS1yZXF1aXNpdGVzIGV4ZWN1dGlvbiBmYWlsZWQuJyk7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdHJlamVjdChlcnIpO1xuXHRcdH0pO1xuXHR9KTtcbn07XG5cbldvcmtmbG93LnByb3RvdHlwZS50YXNrID0gZnVuY3Rpb24odHlwZSwgcGFyYW1zKXtcblx0Ly8gUmUtYXNzaWduIHRoaXMgXG5cdHZhciBfdGhpcyA9IHRoaXM7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRpZiAodHlwZSA9PT0gJ2luZGljYXRvci5tYXJrQ29tcGxldGUnKSB7XG5cdFx0XHRyZXNvbHZlKCdTdWNjZXNzJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlamVjdCgnRXJyb3InKTtcblx0XHR9XG5cdH0pO1xufTtcblxuV29ya2Zsb3cucHJvdG90eXBlLnRyYW5zaXRpb24gPSBmdW5jdGlvbihwcm9jZXNzSWQsIHN1YlByb2Nlc3NJZCwgc3RlcElkLCB0cmFuc2l0aW9uSWQsIHN1YlByb2Nlc3NNb2RlbCwgaW5wdXREYXRhLCB3b3JrZmxvdyl7XG5cdC8vIFJlLWFzc2lnbiB0aGlzIFxuXHR2YXIgX3RoaXMgPSB0aGlzO1xuXHQvLyBVc2UgdGhlIG5hdGl2ZSBlczYgUHJvbWlzZSBjb25zdHJ1Y3RvclxuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0UHJvY2Vzcy50cmFuc2l0aW9uKHByb2Nlc3NJZCwgc3ViUHJvY2Vzc0lkLCBzdGVwSWQsIHRyYW5zaXRpb25JZCwgc3ViUHJvY2Vzc01vZGVsLCBpbnB1dERhdGEsIHdvcmtmbG93KS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnV29ya2Zsb3cgdHJhbnNpdGlvbmVkIHRvIHRoZSBuZXh0IHN0ZXAgc3VjY2Vzc2Z1bGx5LicsIHN1YlByb2Nlc3NNb2RlbCk7XG5cdFx0XHRyZXNvbHZlKHN1Y2Nlc3MpO1xuXHRcdH0sIGZ1bmN0aW9uKGVycil7XG5cdFx0XHRyZWplY3QoZXJyKTtcblx0XHR9KTtcdFxuXHR9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gV29ya2Zsb3c7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbGl0eScpO1xuXG4vKipcbiAqIEZvcm0gTW9kdWxlXG4gKlxuICogQG1vZHVsZSBsaWIvZm9ybVxuICogQGF1dGhvciBCcmVudCBHb3Jkb25cbiAqIEB2ZXJzaW9uIDIuMC4wXG4gKiBAZGVzY3JpcHRpb24gXG4gKiBAY29weXJpZ2h0IEt3YW50dSBMdGQgUlNBIDIwMDktMjAxNS5cbiAqXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlKGZvcm1EZWYsIHdvcmtmbG93KXtcblx0dmFyIGluZGljYXRvcnMgPSBbXTtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHV0aWwuc3luY0xvb3AoZm9ybURlZi5pbmRpY2F0b3JzLmxlbmd0aCwgZnVuY3Rpb24obG9vcCl7XG5cdFx0XHR2YXIgY291bnRlciA9IGxvb3AuaXRlcmF0aW9uKCk7XG5cdFx0XHR2YXIgaW5kaWNhdG9ySWQgPSBmb3JtRGVmLmluZGljYXRvcnNbY291bnRlcl0uX2lkO1xuXHRcdFx0dmFyIGluZGljYXRvck5hbWUgPSBmb3JtRGVmLmluZGljYXRvcnNbY291bnRlcl0ubmFtZS5pMThuLnZhbHVlO1xuXHRcdFx0Ly8gQ29tbWVudCBvdXQgZm9yIHRlc3Rpbmdcblx0XHRcdC8vIHZhciBpbmRpY2F0b3IgPSB7fTtcblx0XHRcdC8vIGxpYnJhcnkuY3JlYXRlSW5kaWNhdG9ySW5zdGFuY2UoaW5kaWNhdG9ySWQsIHdvcmtmbG93LnByb2ZpbGUpLmRvbmUoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHQvLyBcdGluZGljYXRvciA9IGRhdGE7XG5cdFx0XHQvLyBcdGluZGljYXRvcnMucHVzaChpbmRpY2F0b3IpO1xuXHRcdFx0Ly8gXHRsb29wLm5leHQoKTtcblx0XHRcdC8vIH0pLmZhaWwoZnVuY3Rpb24oZXJyKXtcblx0XHRcdC8vIFx0Y29uc29sZS5sb2coZXJyKTtcblx0XHRcdC8vIH0pO1xuXHRcdFx0dmFyIHV1aWQgPSB3b3JrZmxvdy5wcm9maWxlICsgJzonICsgd29ya2Zsb3cuYXBwICsgJzonICsgaW5kaWNhdG9ySWQgKyAnOjAnOyAvLyByZXBsYWNlIHRoaXMgd2l0aCBnYXRla2VlcGVyIGNhbGwgYW5kIHJldHVybiB0aGUgdXVpZFxuXHRcdFx0dmFyIGluZGljYXRvciA9IHtcblx0XHRcdFx0X2lkOiB1dWlkLFxuXHRcdFx0XHRjYXRlZ29yeToge1xuXHRcdFx0XHRcdHRlcm06IGluZGljYXRvcklkLFxuXHRcdFx0XHRcdGxhYmVsOiBpbmRpY2F0b3JOYW1lXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwicHJvY2Vzc2VzXCI6IFtdXG5cdFx0XHR9O1xuXHRcdFx0aW5kaWNhdG9ycy5wdXNoKGluZGljYXRvcik7XG5cdFx0XHRsb29wLm5leHQoKTtcblx0XHR9LCBmdW5jdGlvbigpe1xuXHRcdCAgICAvLyBjb25zb2xlLmxvZygnZG9uZScpO1xuXHRcdCAgICB2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnRm9ybSBjcmVhdGVkIHN1Y2Nlc3NmdWxseS4nLCBpbmRpY2F0b3JzKTtcblx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuZnVuY3Rpb24gc2F2ZShpbmRpY2F0b3Ipe1xuXHR2YXIgY29tcGxldGVkID0gW107XG5cdHZhciByZXN1bHQgPSB7XG5cdFx0Y29tcGxldGU6IHRydWUsXG5cdFx0ZGF0YTogW11cblx0fTtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdGb3JtIGluZGljYXRvciBzZXQgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdCk7XG5cdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0fSk7XG59O1xuXG5mdW5jdGlvbiBzdWJtaXQoZm9ybSl7XG5cdHZhciBjb21wbGV0ZWQgPSBbXTtcblx0dmFyIHJlc3VsdCA9IHtcblx0XHRjb21wbGV0ZTogdHJ1ZSxcblx0XHRkYXRhOiBbXVxuXHR9O1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0dmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MoJ0Zvcm0gc3VibWl0dGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQpO1xuXHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdH0pO1xufTtcblxuZnVuY3Rpb24gYXV0aG9yaXNlKGZvcm0pe1xuXHR2YXIgY29tcGxldGVkID0gW107XG5cdHZhciByZXN1bHQgPSB7XG5cdFx0Y29tcGxldGU6IHRydWUsXG5cdFx0ZGF0YTogW11cblx0fTtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdGb3JtIGF1dGhvcmlzZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdCk7XG5cdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0fSk7XG59O1xuXG5mdW5jdGlvbiBjbG9zZShmb3JtKXtcblx0dmFyIGNvbXBsZXRlZCA9IFtdO1xuXHR2YXIgcmVzdWx0ID0ge1xuXHRcdGNvbXBsZXRlOiB0cnVlLFxuXHRcdGRhdGE6IFtdXG5cdH07XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnRm9ybSBjbG9zZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdCk7XG5cdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0fSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgXG5cbiBcdGNyZWF0ZTogY3JlYXRlLFxuIFx0c2F2ZTogc2F2ZSxcbiBcdHN1Ym1pdDogc3VibWl0LFxuIFx0YXV0aG9yaXNlOiBhdXRob3Jpc2UsXG4gXHRjbG9zZTogY2xvc2VcblxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbGl0eScpO1xuXG4vKipcbiAqIE1vZGVsIE1vZHVsZVxuICpcbiAqIEBtb2R1bGUgbGliL21vZGVsXG4gKiBAYXV0aG9yIEJyZW50IEdvcmRvblxuICogQHZlcnNpb24gMC4xLjBcbiAqIEBkZXNjcmlwdGlvbiBcbiAqIEBjb3B5cmlnaHQgS3dhbnR1IEx0ZCBSU0EgMjAwOS0yMDE1LlxuICpcbiAqL1xuXG5mdW5jdGlvbiBpbnN0YW5jZSgpe1xuXHR2YXIgbW9kZWwgPSB7XG5cdCAgICBcIl9pZFwiOiBcIlwiLFxuXHQgICAgXCJ2ZXJzaW9uXCI6IFwiXCIsXG5cdCAgICBcInR5cGVcIjogXCJ3b3JrZmxvd0luc3RhbmNlXCIsXG5cdCAgICBcInByb2Nlc3Nlc1wiOiBbXVxuXHR9O1xuXHRyZXR1cm4gbW9kZWw7XG59O1xuXG5mdW5jdGlvbiBjb25maWd1cmF0aW9uKCl7XG5cdHZhciBtb2RlbCA9IHtcblx0XHRcIl9pZFwiOiBcIjEyMzQ6bWFuZ2F1bmdQcm9qZWN0XCIsXG5cdFx0XCJfdmVyc2lvblwiOiBcIjEuMFwiLFxuXHRcdFwidHlwZVwiOiBcIndvcmtmbG93Q29uZmlnXCIsXG5cdFx0XCJ0aXRsZVwiOiB7XG5cdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFwidmFsdWVcIjogXCJNYW5nYWd1bmcgcHJvamVjdCB3b3JrZmxvd1wiXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRcImRlc2NyaXB0aW9uXCI6IHtcblx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcInZhbHVlXCI6IFwiTWFuZ2FndW5nIHByb2plY3Qgd29ya2Zsb3cgdXNlZCB0byBtYW5hZ2UgaG91c2luZyBkZXZlbG9wbWVudC5cIlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRcImlkZW50aWZpY2F0aW9uXCI6IHtcblx0XHRcdFwiZG9jdW1lbnRhdGlvblwiOiB7XG5cdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XCJfbGFuZ1wiOiBcIlwiLFxuXHRcdFx0XHRcdFwidmFsdWVcIjogXCJcIlxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0XCJ1cGdyYWRlSW5mb3JtYXRpb25cIjoge1xuXHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFwiX2xhbmdcIjogXCJcIixcblx0XHRcdFx0XHRcInZhbHVlXCI6IFwiXCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0XCJ2YXJpYWJsZXNcIjoge1xuXHRcdFx0XCJ2YXJpYWJsZVwiOiBbe1xuXHRcdFx0XHRcIl9pZFwiOiBcIlwiLFxuXHRcdFx0XHRcIl9kYXRhVHlwZVwiOiBcIlwiLFxuXHRcdFx0XHRcIl9zZXNzaW9uVmFyXCI6IFwiXCIsXG5cdFx0XHRcdFwiX2RlZmF1bHRcIjogXCJcIixcblx0XHRcdFx0XCJfdmFsdWVcIjogXCJcIlxuXHRcdFx0fV1cblx0XHR9LFxuXHRcdFwicm9sZXNcIjoge1xuXHRcdFx0XCJyb2xlXCI6IFt7XG5cdFx0XHRcdFwiX2lkXCI6IFwiXCIsXG5cdFx0XHRcdFwiX2xldmVsXCI6IFwiXCIsXG5cdFx0XHRcdFwibmFtZVwiOiB7XG5cdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJcIixcblx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJyb2xlTWFwcGluZ3NcIjoge1xuXHRcdFx0XHRcdFwicm9sZU1hcHBpbmdcIjoge1xuXHRcdFx0XHRcdFx0XCJfYXBwbGljYXRpb25JZFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJfcm9sZUlkXCI6IFwiXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwicmVxdWlyZWRSb2xlc1wiOiB7XG5cdFx0XHRcdFx0XCJyZXF1aXJlZFJvbGVcIjoge1xuXHRcdFx0XHRcdFx0XCJfYXBwbGljYXRpb25JZFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJfcm9sZUlkXCI6IFwiXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1dXG5cdFx0fSxcblx0XHRcInByb2Nlc3Nlc1wiOiBbe1xuXHRcdFx0XCJfaWRcIjogXCJyZWdpc3RyYXRpb25cIixcblx0XHRcdFwiX3NlcVwiOiBcIjFcIixcblx0XHRcdFwibmFtZVwiOiB7XG5cdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJlZ2lzdGVyIGEgcHJvamVjdFwiXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRcImhlbHBcIjoge1xuXHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFwidmFsdWVcIjogXCJSZWdpc3RlciBhIG5ldyBwcm9qZWN0XCJcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdFwidmFyaWFibGVzXCI6IFt7XG5cdFx0XHRcdFwiX2lkXCI6IFwiXCIsXG5cdFx0XHRcdFwiX2RhdGFUeXBlXCI6IFwiXCIsXG5cdFx0XHRcdFwiX3Nlc3Npb25WYXJcIjogXCJcIixcblx0XHRcdFx0XCJfZGVmYXVsdFwiOiBcIlwiLFxuXHRcdFx0XHRcIl92YWx1ZVwiOiBcIlwiXG5cdFx0XHR9XSxcblx0XHRcdFwicHJlcmVxdWlzaXRlc1wiOiBbe1xuXHRcdFx0XHRcIl9zZXFcIjogXCIxXCIsXG5cdFx0XHRcdFwiX3R5cGVcIjogXCJjb3VudFwiLFxuXHRcdFx0XHRcIl9zdWJqZWN0XCI6IFwibW9udGhseVByb2dyZXNzLmluc3RhbmNlXCIsXG5cdFx0XHRcdFwiX29wZXJhdG9yXCI6IFwiZXF1YWxUb1wiLFxuXHRcdFx0XHRcIl92YWx1ZVwiOiBcIjBcIixcblx0XHRcdFx0XCJtZXNzYWdlXCI6IHtcblx0XHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiVGhlIHByb2plY3QgcmVnaXN0cmF0aW9uIGZvcm0gY2FuJ3QgYmUgZWRpdGVkIG9uY2UgdGhlIG1vbnRobHkgcHJvZ3Jlc3MgcHJvY2VzcyBoYXMgYmVlbiBpbml0aWF0ZWQuXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gTm90IGFsbG93ZWQgdG8gY3JlYXRlIGFub3RoZXIgaW5zdGFuY2UgaWYgdGhlcmUgaXMgb25lIG9wZW5cblx0XHRcdH1dLFxuXHRcdFx0XCJwcmVBY3Rpb25zXCI6IFt7XG5cdFx0XHRcdFwiX3NlcVwiOiBcIlwiLFxuXHRcdFx0XHRcIl90eXBlXCI6IFwiXCIsXG5cdFx0XHRcdFwiZnVuY3RcIjoge1xuXHRcdFx0XHRcdFwibW9kdWxlXCI6IFwiXCIsXG5cdFx0XHRcdFx0XCJtZXRob2RcIjogXCJcIixcblx0XHRcdFx0XHRcInBhcmFtc1wiOiB7XG5cdFx0XHRcdFx0XHRcInBhcmFtXCI6IFtdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInJlc3RcIjoge1xuXHRcdFx0XHRcdFwiaG9zdElkXCI6IFwiXCIsXG5cdFx0XHRcdFx0XCJzZXJ2aWNlXCI6IFwiXCIsXG5cdFx0XHRcdFx0XCJBUElLZXlcIjogXCJcIixcblx0XHRcdFx0XHRcImZvcm1hdFwiOiBcIlwiLFxuXHRcdFx0XHRcdFwiY29sbGVjdGlvblwiOiBcIlwiLFxuXHRcdFx0XHRcdFwiZW5kcG9pbnRcIjogXCJcIixcblx0XHRcdFx0XHRcInBhcmFtc1wiOiB7XG5cdFx0XHRcdFx0XHRcInBhcmFtXCI6IFtdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XSxcblx0XHRcdFwic3ViUHJvY2Vzc2VzXCI6IFt7XG5cdFx0XHRcdFwiX2lkXCI6IFwic3BSZWdpc3RyYXRpb25cIixcblx0XHRcdFx0XCJfc2VxXCI6IFwiMVwiLFxuXHRcdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJQcm9qZWN0IFJlZ2lzdHJhdGlvbiBGb3JtXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiaGVscFwiOiB7XG5cdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlJlZ2lzdGVyIGEgbmV3IHByb2plY3RcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJpbml0aWF0ZVwiOiB7XG5cdFx0XHRcdFx0XCJfdHlwZVwiOiBcInVzZXJcIixcblx0XHRcdFx0XHRcIm1heEluc3RhbmNlc1wiOiBcIi0xXCIsXG5cdFx0XHRcdFx0XCJhY3Rpb25cIjoge1xuXHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcImJ1dHRvblwiLFxuXHRcdFx0XHRcdFx0XCJsYWJlbFwiOiBcIkNyZWF0ZVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcImRhdGVzXCI6IHtcblx0XHRcdFx0XHRcdFwidmFsaWRcIjoge1xuXHRcdFx0XHRcdFx0XHRcIl90eXBlXCI6IFwidXNlclNlbGVjdGVkXCIsXG5cdFx0XHRcdFx0XHRcdFwibWVzc2FnZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlBsZWFzZSBzZWxlY3QgYSB2YWxpZCBkYXRlIGkuZS4gdGhlIG1vbnRobHkgZGF0ZSB0aGF0IHRoZSBkYXRhIGNhcHR1cmVkIGlzIHZhbGlkIGZvci5cIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwiZHVlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcInVzZXJTZWxlY3RlZFwiLFxuXHRcdFx0XHRcdFx0XHRcIm1lc3NhZ2VcIjoge1xuXHRcdFx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJQbGVhc2Ugc2VsZWN0IGEgZHVlIGRhdGUgaS5lLiB0aGUgYWN0dWFsIGRhdGUgdGhhdCB0aGUgZGF0YSBuZWVkcyB0byBiZSBjYXB0dXJlZCBhbmQgYXV0aG9yaXNlZCBieS5cIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJpbmRpY2F0b3JzXCI6IFt7XG5cdFx0XHRcdFx0XCJfaWRcIjogXCJwcm9qZWN0RGV0YWlsXCIsXG5cdFx0XHRcdFx0XCJtYXhJbnN0YW5jZXNcIjogXCIxXCIsXG5cdFx0XHRcdFx0XCJuYW1lXCI6IHtcblx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiUHJvamVjdCBEZXRhaWxzXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRcIl9pZFwiOiBcInByb2plY3RMb2NhdGlvblwiLFxuXHRcdFx0XHRcdFwibWF4SW5zdGFuY2VzXCI6IFwiLTFcIixcblx0XHRcdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJQcm9qZWN0IExvY2F0aW9uc1wiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0XCJfaWRcIjogXCJkZXZlbG9wZXJEZXRhaWxcIixcblx0XHRcdFx0XHRcIm1heEluc3RhbmNlc1wiOiBcIjFcIixcblx0XHRcdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJEZXZlbG9wZXIgRGV0YWlsc1wiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XSxcblx0XHRcdFx0XCJzdGVwc1wiOiBbe1xuXHRcdFx0XHRcdFwiX2lkXCI6IFwiY3JlYXRlRm9ybVwiLFxuXHRcdFx0XHRcdFwiX3NlcVwiOiBcIjFcIixcblx0XHRcdFx0XHRcIl9zZXRJbnN0YW5jZVN0YXR1c1RvXCI6IFwiQ3JlYXRlZFwiLFxuXHRcdFx0XHRcdFwiX3NldFN0YXR1c01zZ1RvXCI6IFwiRm9ybSBjcmVhdGVkXCIsXG5cdFx0XHRcdFx0XCJuYW1lXCI6IHtcblx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiQ3JlYXRlIHRoZSByZWdpc3RyYXRpb24gZm9ybS5cIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XCJwcmVyZXF1aXNpdGVzXCI6IFt7XG5cdFx0XHRcdFx0XHRcIl9zZXFcIjogXCJcIixcblx0XHRcdFx0XHRcdFwiX3R5cGVcIjogXCJcIixcblx0XHRcdFx0XHRcdFwiX29wZXJhdG9yXCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcIl9zdWJqZWN0XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcIl92YWx1ZVwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJtZXNzYWdlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1dLFxuXHRcdFx0XHRcdFwiYWN0aW9uc1wiOiBbe1xuXHRcdFx0XHRcdFx0XCJfc2VxXCI6IFwiMVwiLFxuXHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcImludGVybmFsXCIsXG5cdFx0XHRcdFx0XHRcImZ1bmN0XCI6IHtcblx0XHRcdFx0XHRcdFx0XCJtb2R1bGVcIjogXCJmb3JtXCIsXG5cdFx0XHRcdFx0XHRcdFwibWV0aG9kXCI6IFwiY3JlYXRlXCIsXG5cdFx0XHRcdFx0XHRcdFwidHlwZVwiOiBcIm5ld1NlcXVlbmNlXCIgXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJ0cmFuc2l0aW9uc1wiOiBbe1xuXHRcdFx0XHRcdFx0XHRcIl90eXBlXCI6IFwiYXV0b1wiLFxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJcIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XCJnb1RvXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcIl90eXBlXCI6IFwibmV4dFN0ZXBcIixcblx0XHRcdFx0XHRcdFx0XHRcIl9zdGVwSWRcIjogXCJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcIl9zdG9wXCI6IGZhbHNlXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRcIl9pZFwiOiBcImNhcHR1cmVGb3JtXCIsXG5cdFx0XHRcdFx0XCJfc2VxXCI6IFwiMlwiLFxuXHRcdFx0XHRcdFwiX3NldFN0YXR1c1RvXCI6IFwiSW5Qcm9ncmVzc1wiLFxuXHRcdFx0XHRcdFwiX3NldFN0YXR1c01zZ1RvXCI6IFwiVXNlciBhc3NpZ25lZCBhbmQgZGF0YSBjYXB0dXJlIGluIHByb2dyZXNzXCIsXG5cdFx0XHRcdFx0XCJuYW1lXCI6IHtcblx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiQ2FwdHVyZVwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcInByZXJlcXVpc2l0ZXNcIjogW3tcblx0XHRcdFx0XHRcdFwiX3NlcVwiOiBcIjFcIixcblx0XHRcdFx0XHRcdFwiX3R5cGVcIjogXCJyZWFkeVRvU3VibWl0XCIsXG5cdFx0XHRcdFx0XHRcIl9zdWJqZWN0XCI6IFwiaW5kaWNhdG9ycy5jb21wbGV0ZVwiLFxuXHRcdFx0XHRcdFx0XCJfb3BlcmF0b3JcIjogXCJlcXVhbFRvXCIsXG5cdFx0XHRcdFx0XHRcIl92YWx1ZVwiOiBcInRydWVcIixcblx0XHRcdFx0XHRcdFwibWVzc2FnZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkFsbCBmb3JtIGluZGljYXRvcnMgaGF2ZSB0byBiZSBtYXJrZWQgYXMgY29tcGxldGUgYmVmb3JlIHN1Ym1pc3Npb24uXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1dLFxuXHRcdFx0XHRcdFwiYWN0aW9uc1wiOiBbXSxcblx0XHRcdFx0XHRcInRhc2tcIjoge1xuXHRcdFx0XHRcdFx0XCJhc3NpZ25cIjoge1xuXHRcdFx0XHRcdFx0XHRcInByb2ZpbGVSb2xlXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcInByb2ZpbGVcIjogXCJjdXJyZW50XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJyb2xlXCI6IFwiY2FwdHVyZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCJcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwid29ya1wiOiB7XG5cdFx0XHRcdFx0XHRcdFwiYWN0aW9uXCI6IFwiZWRpdEZvcm1cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwidHJhbnNpdGlvbnNcIjogW3tcblx0XHRcdFx0XHRcdFx0XCJfaWRcIjogXCJzdWJtaXRGb3JtXCIsXG5cdFx0XHRcdFx0XHRcdFwiX3R5cGVcIjogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFwiX2xhbmdcIjogXCJlblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIlN1Ym1pdFwiXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcImdvVG9cIjoge1xuXHRcdFx0XHRcdFx0XHRcdFwiX3R5cGVcIjogXCJuZXh0U3RlcFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiX3N0ZXBJZFwiOiBcIlwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFwiX3N0b3BcIjogZmFsc2Vcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0XCJfaWRcIjogXCJhdXRob3Jpc2VGb3JtXCIsXG5cdFx0XHRcdFx0XCJfc2VxXCI6IFwiM1wiLFxuXHRcdFx0XHRcdFwiX3NldEluc3RhbmNlU3RhdHVzVG9cIjogXCJhd2FpdGluZ0F1dGhvcmlzYXRpb25cIixcblx0XHRcdFx0XHRcIl9zZXRTdGF0dXNNc2dUb1wiOiBcIkZvcm0gZGF0YSBzdWJtaXR0ZWQsIHVzZXIgYXNzaWduZWQgYW5kIGZvcm0gZGF0YSB1bmRlciByZXZpZXdcIixcblx0XHRcdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJSZXZpZXcgdGhlIHJlZ2lzdHJhdGlvbiBmb3JtIGRhdGEuXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFwicHJlcmVxdWlzaXRlc1wiOiBbe1xuXHRcdFx0XHRcdFx0XCJfc2VxXCI6IFwiMVwiLFxuXHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcImNoZWNrUm9sZVwiLFxuXHRcdFx0XHRcdFx0XCJfc3ViamVjdFwiOiBcInByb2ZpbGVSb2xlXCIsXG5cdFx0XHRcdFx0XHRcIl9vcGVyYXRvclwiOiBcImVxdWFsVG9cIixcblx0XHRcdFx0XHRcdFwiX3ZhbHVlXCI6IFwiYXV0aG9yaXNlclwiLFxuXHRcdFx0XHRcdFx0XCJtZXNzYWdlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJpMThuXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiWW91IGhhdmUgdG8gYmUgYW4gYXV0aG9yaXNlciBvbiB0aGUgcHJvamVjdCB0byBhcHByb3ZlIHRoZSBmb3JtIGRhdGEgdGhhdCBoYXMgYmVlbiBjYXB0dXJlZCBvciByZWZlciBiYWNrIGZvciBmdXJ0aGVyIGVkaXRpbmcuXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1dLFxuXHRcdFx0XHRcdFwiYWN0aW9uc1wiOiBbXSxcblx0XHRcdFx0XHRcInRhc2tcIjoge1xuXHRcdFx0XHRcdFx0XCJhc3NpZ25cIjoge1xuXHRcdFx0XHRcdFx0XHRcInByb2ZpbGVSb2xlXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcInByb2ZpbGVcIjogXCJjdXJyZW50XCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJyb2xlXCI6IFwiYXV0aG9yaXNlclwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIlwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJ3b3JrXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJhY3Rpb25cIjogXCJlZGl0Rm9ybVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJ0cmFuc2l0aW9uc1wiOiBbe1xuXHRcdFx0XHRcdFx0XHRcIl9pZFwiOiBcImF1dGhvcmlzZUZvcm1cIixcblx0XHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcInVzZXJcIixcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiQXV0aG9yaXNlXCJcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFwiZ29Ub1wiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcIm5leHRTdGVwXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJfc3RlcElkXCI6IFwiXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XCJfc3RvcFwiOiBmYWxzZVxuXHRcdFx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdFx0XHRcIl9pZFwiOiBcInJldmVydEZvcm1cIixcblx0XHRcdFx0XHRcdFx0XCJfdHlwZVwiOiBcInVzZXJcIixcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcInZhbHVlXCI6IFwiUmVmZXIgQmFja1wiXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcImdvVG9cIjoge1xuXHRcdFx0XHRcdFx0XHRcdFwiX3R5cGVcIjogXCJzdGVwSWRcIixcblx0XHRcdFx0XHRcdFx0XHRcIl9zdGVwSWRcIjogXCJjYXB0dXJlRm9ybVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFwiX3N0b3BcIjogZmFsc2Vcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0XCJfaWRcIjogXCJjbG9zZUZvcm1cIixcblx0XHRcdFx0XHRcIl9zZXFcIjogXCI1XCIsXG5cdFx0XHRcdFx0XCJfc2V0SW5zdGFuY2VTdGF0dXNUb1wiOiBcIkNvbXBsZXRlXCIsXG5cdFx0XHRcdFx0XCJfc2V0U3RhdHVzTXNnVG9cIjogXCJGb3JtIGxvY2tlZFwiLFxuXHRcdFx0XHRcdFwibmFtZVwiOiB7XG5cdFx0XHRcdFx0XHRcImkxOG5cIjoge1xuXHRcdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFx0XCJ2YWx1ZVwiOiBcIkNsb3NlIHRoZSByZWdpc3RyYXRpb24gZm9ybS5cIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XCJhY3Rpb25zXCI6IFt7XG5cdFx0XHRcdFx0XHRcIl9zZXFcIjogXCIxXCIsXG5cdFx0XHRcdFx0XHRcIl90eXBlXCI6IFwiaW50ZXJuYWxcIixcblx0XHRcdFx0XHRcdFwiZnVuY3RcIjoge1xuXHRcdFx0XHRcdFx0XHRcIm1vZHVsZVwiOiBcImZvcm1cIixcblx0XHRcdFx0XHRcdFx0XCJtZXRob2RcIjogXCJhdXRob3Jpc2VcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwidHJhbnNpdGlvblwiOiBbe1xuXHRcdFx0XHRcdFx0XHRcIl90eXBlXCI6IFwiYXV0b1wiLFxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjoge1xuXHRcdFx0XHRcdFx0XHRcdFwiaTE4blwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcIl9sYW5nXCI6IFwiZW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFwidmFsdWVcIjogXCJcIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XCJnb1RvXCI6IHtcblx0XHRcdFx0XHRcdFx0XHRcIl90eXBlXCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJfc3RlcElkXCI6IFwiXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XCJfc3RvcFwiOiB0cnVlXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH1dXG5cdFx0XHR9XSxcblx0XHRcdFwicG9zdEFjdGlvbnNcIjoge31cblx0XHR9XVxuXHR9O1xuXHRyZXR1cm4gbW9kZWw7XG59O1xuXG5mdW5jdGlvbiBwcm9jZXNzKCl7XG5cdHZhciBtb2RlbCA9IHtcbiAgICAgICAgXCJjb25maWdJZFwiOiBcIlwiLCBcbiAgICAgICAgXCJpbnN0YW5jZUlkXCI6IFwiXCIsXG4gICAgICAgIFwicHJvY2Vzc0lkXCI6IFwiXCIsXG4gICAgICAgIFwic3ViUHJvY2Vzc0lkXCI6IFwiXCIsXG4gICAgICAgIFwic3RlcElkXCI6IFwiXCIsXG4gICAgICAgIFwiYXNzaWduZWRUb1wiOiB7XG4gICAgICAgICAgICBcInVzZXJJZFwiOiBcIlwiLFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJ0b2tlblwiOiBcIlwiLFxuICAgICAgICBcInN0YXR1c1wiOiBcIlwiLFxuICAgICAgICBcInN0YXR1c01zZ1wiOiBcIlwiLFxuICAgICAgICBcImxhc3RVcGRhdGVkXCI6IFwiXCIsXG4gICAgICAgIFwiZHVlRGF0ZVwiOiBcIlwiXG4gICAgfVxuICAgIHJldHVybiBtb2RlbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBcblxuIFx0Y29uZmlndXJhdGlvbjogY29uZmlndXJhdGlvbiwgXG4gXHRpbnN0YW5jZTogaW5zdGFuY2UsIFxuIFx0cHJvY2VzczogcHJvY2Vzc1xuXG59IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbGl0eScpO1xudmFyIGZvcm0gPSByZXF1aXJlKCcuL2Zvcm0nKTtcblxuLyoqXG4gKiBQcm9jZXNzIE1vZHVsZVxuICpcbiAqIEBtb2R1bGUgbGliL3Byb2Nlc3NcbiAqIEBhdXRob3IgQnJlbnQgR29yZG9uXG4gKiBAdmVyc2lvbiAwLjEuMFxuICogQGRlc2NyaXB0aW9uIFxuICogQGNvcHlyaWdodCBLd2FudHUgTHRkIFJTQSAyMDA5LTIwMTUuXG4gKlxuICovXG5cbi8qKiBcbiAqIFByb2Nlc3MgcHJlLXJlcXVpc2l0ZXNcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcHJlcmVxdWlzaXRlcyAtIHRoZSBwcmUtcmVxdWlzaXRlcyBjb25maWcgZGF0YVxuICpcbiAqIEBleGFtcGxlIFxuICpcbiAqIEByZXR1cm4gXG4gKlxuICovXG5mdW5jdGlvbiBwcmVSZXF1aXNpdGVzKHByZXJlcXVpc2l0ZXMpIHtcblx0dmFyIGNvbXBsZXRlZCA9IFtdO1xuXHR2YXIgcmVzdWx0ID0ge1xuXHRcdGNvbXBsZXRlOiBmYWxzZSxcblx0XHRkYXRhOiBbXVxuXHR9O1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0Ly8gVW5jb21tZW50IGJlbG93IHNlY3Rpb24gd2hlbiByZWFkeSB0byBpbXBsZW1lbnRcblx0XHQvLyB1dGlsLnN5bmNMb29wKHByZXJlcXVpc2l0ZXMubGVuZ3RoLCBmdW5jdGlvbihsb29wKXtcblx0XHQvLyBcdHZhciBjb3VudGVyID0gbG9vcC5pdGVyYXRpb24oKTtcblx0XHQvLyBcdHByZVJlcXVpc2l0ZShwcmVyZXF1aXNpdGVzW2NvdW50ZXJdLCBjb3VudGVyKS50aGVuKGZ1bmN0aW9uKGRhdGEpe1x0XHRcdFxuXHRcdC8vIFx0XHQvLyBDaGVjayBpZiBhbGwgcHJlLXJlcXVpc2l0ZXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cblx0XHQvLyBcdFx0Y29tcGxldGVkLnB1c2goZGF0YS5jb21wbGV0ZSk7XG5cdFx0Ly8gXHRcdHJlc3VsdC5kYXRhLnB1c2goZGF0YSk7XG5cdFx0Ly8gXHRcdGlmIChjb21wbGV0ZWQuZXZlcnkoQm9vbGVhbikpIHtcblx0XHQvLyBcdFx0XHRyZXN1bHQuY29tcGxldGVkID0gdHJ1ZTtcblx0XHQvLyBcdFx0XHRsb29wLm5leHQoKTtcblx0XHQvLyBcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnUHJlLXJlcXVpc2l0ZXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQpO1xuXHRcdC8vIFx0XHRcdGRlZmVycmVkLnJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0Ly8gXHRcdH0gZWxzZSB7XG5cdFx0Ly8gXHRcdFx0bG9vcC5icmVhaygpO1xuXHRcdC8vIFx0XHRcdHZhciBlcnJvciA9IHV0aWwuZXJyb3IoJ1dGMDA3Jyk7XG5cdFx0Ly8gXHRcdFx0ZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcblx0XHQvLyBcdFx0fVxuXHRcdC8vIFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHQvLyBcdFx0bG9vcC5icmVhaygpO1xuXHRcdC8vIFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcblx0XHQvLyBcdH0pO1xuXHRcdC8vIH0pO1xuXHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdQcmUtcmVxdWlzaXRlcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdCk7XG5cdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0fSk7XG59O1xuXG4vKiogXG4gKiBQcm9jZXNzIHByZS1yZXF1aXNpdGUsIGV4ZWN1dGUgdGhlIHByZS1yZXF1aXNpdGUgY29uZGl0aW9uLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcmVyZXF1aXNpdGUgLSB0aGUgcHJlLXJlcXVpc2l0ZSBjb25maWcgZGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IGNvdW50ZXIgLSB0aGUgcHJlLXJlcXVpc2l0ZSBjb3VudCAvIG51bWJlclxuICogQHBhcmFtIHtvYmplY3R9IHdvcmtmbG93IC0gdGhlIHdvcmtmbG93IGNvbnN0cnVjdG9yIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGUgXG4gKiB2YXIgY29uZmlnID0ge1xuICpcdCAgICBcIl9zZXFcIjogXCJcIixcbiAqXHQgICAgXCJfdHlwZVwiOiBcIlwiLFxuICpcdFx0XCJfc3ViamVjdFwiOiBcIlwiLFxuICpcdCAgICBcIl9vcGVyYXRvclwiOiBcIlwiLFxuICpcdCAgICBcIl92YWx1ZVwiOiBcIlwiLFxuICpcdCAgICBcIl9yZWZlcmVuY2VcIjogXCJcIixcbiAqXHQgICAgXCJtZXNzYWdlXCI6IHtcbiAqXHQgICAgXHRcImkxOG5cIjoge1xuICpcdCAgICBcdFx0XCJfbGFuZ1wiOiBcImVuXCIsXG4gKlx0ICAgIFx0XHRcInZhbHVlXCI6IFwiXCJcbiAqXHQgICAgXHR9XG4gKlx0ICAgIH1cbiAqXHR9O1xuICogUHJvY2Vzcy5wcmVSZXF1aXNpdGUoY29uZmlnLCBjb3VudGVyLCBpbnN0YW5jZSwgZG9jKTtcbiAqXG4gKiBAcmV0dXJuIFxuICpcbiAqL1xuZnVuY3Rpb24gcHJlUmVxdWlzaXRlKHByZXJlcXVpc2l0ZSwgY291bnRlciwgd29ya2Zsb3cpe1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0c3dpdGNoKHByZXJlcXVpc2l0ZS5fdHlwZSkge1xuXHRcdFx0Ly8gVE9ETzogQWRkIHRoZSBjYWxsIHRvIHRoZSByZWxldmFudCBtZXRob2RzIGJhc2VkIG9uIHRoZSBfdHlwZSBcblx0XHRcdC8vIGF0dHJpYnV0ZS5cblx0XHRcdGNhc2UgJ2NvdW50Jzpcblx0XHRcdFx0Ly8gVE9ETzogQWRkIGNvZGUgbG9naWMgaGVyZS4uLlxuXHRcdFx0XHR2YXIgZGF0YSA9IHt9O1xuXHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnTW9jayBjb3VudCBzdWNjZXNzZnVsbC4nLCBkYXRhKTtcblx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR2YXIgZXJyb3IgPSB1dGlsLmVycm9yKCdXRlByZVJlcXVpc2l0ZUVycm9yJywnUHJlLXJlcXVpc2l0ZSB0eXBlOiAnICsgcHJlcmVxdWlzaXRlLl90eXBlICsgJyBub3QgZGVmaW5lZC4nKTtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHR9XG5cdH0pO1xufTtcblxuLyoqIFxuICogUHJvY2VzcyBwcmUtYWN0aW9uc3NcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcHJlQWN0aW9ucyAtIHRoZSBwcmUtYWN0aW9ucyBjb25maWcgZGF0YVxuICogQHBhcmFtIHtvYmplY3R9IHdvcmtmbG93IC0gdGhlIGN1cnJlbnQgd29ya2Zsb3cgY29uc3RydWN0b3IgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZSBcbiAqXG4gKiBAcmV0dXJuIFxuICpcbiAqL1xuZnVuY3Rpb24gcHJlQWN0aW9ucyhwcmVBY3Rpb25zLCB3b3JrZmxvdyl7XG5cdHZhciBjb21wbGV0ZWQgPSBbXTtcblx0dmFyIHJlc3VsdCA9IHtcblx0XHRjb21wbGV0ZTogZmFsc2UsXG5cdFx0ZGF0YTogW11cblx0fTtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdC8vIEFkZCBmdW5jdGlvbiBsb2dpYyBoZXJlLi4uXG5cblx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnUHJlLWFjdGlvbnMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQpO1xuXHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdH0pO1xufTtcblxuLyoqIFxuICogUHJvY2VzcyBzdWItcHJvY2Vzc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9jZXNzSWQgLSB0aGUgY3VycmVudCBwcm9jZXNzIGlkXG4gKiBAcGFyYW0ge29iamVjdH0gc3ViUHJvY2VzcyAtIHRoZSBzdWItcHJvY2VzcyBjb25maWcgZGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IHNlcSAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIGluc3RhbmNlIGNvdW50ZXIgLyBzZXF1ZW5jZVxuICogQHBhcmFtIHtvYmplY3R9IGlucHV0RGF0YSAtIHRoZSB1c2VyIGlucHV0IGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSB3b3JrZmxvdyAtIHRoZSBjdXJyZW50IHdvcmtmbG93IGNvbnN0cnVjdG9yIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGUgXG4gKlxuICogQHJldHVybiBcbiAqXG4gKi9cbmZ1bmN0aW9uIHN1YlByb2Nlc3MocHJvY2Vzc0lkLCBzdWJQcm9jZXNzLCBzZXEsIGlucHV0RGF0YSwgd29ya2Zsb3cpe1xuXHQvLyBUaGUgZGVmYXVsdCBzdWJQcm9jZXNzIG1vZGVsXG5cdHZhciBzdWJQcm9jZXNzTW9kZWwgPSB7XG5cdFx0XCJpZFwiOiBzdWJQcm9jZXNzLl9pZCwgXG5cdFx0XCJzZXFcIjogc2VxLCBcblx0XHRcImluaXRpYXRlZFwiOiBmYWxzZSxcblx0XHRcImRhdGVzXCI6IHtcbiAgICAgICAgICAgIFwiY3JlYXRlZFwiOiBcIlwiLFxuICAgICAgICAgICAgXCJ2YWxpZFwiOiBcIlwiLFxuICAgICAgICAgICAgXCJkdWVcIjogXCJcIixcbiAgICAgICAgICAgIFwiY2xvc2VkXCI6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJjb21wbGV0ZVwiOiBmYWxzZSxcbiAgICAgICAgXCJpbmRpY2F0b3JzXCI6IFtdLFxuICAgICAgICBcInN0ZXBcIjoge1xuICAgICAgICAgICAgXCJpZFwiOiBcIlwiLFxuICAgICAgICAgICAgXCJzZXFcIjogXCJcIixcbiAgICAgICAgICAgIFwic3RhdHVzXCI6IFwiXCIsXG4gICAgICAgICAgICBcIm1lc3NhZ2VcIjogXCJcIixcbiAgICAgICAgICAgIFwiYXNzaWduZWRUb1wiOiB7XG4gICAgICAgICAgICAgICAgXCJ1c2VySWRcIjogXCJcIixcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cdH07XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHQvLyBJbml0aWF0ZSB0aGUgc3ViLXByb2Nlc3Ncblx0XHRpbml0aWF0ZShzdWJQcm9jZXNzLmluaXRpYXRlLCBpbnB1dERhdGEpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0XHRcdGlmIChyZXN1bHQuY29tcGxldGUpIHtcblx0XHRcdFx0c3ViUHJvY2Vzc01vZGVsLmluaXRpYXRlZCA9IHRydWU7XG5cdFx0XHRcdHN1YlByb2Nlc3NNb2RlbC5kYXRlcy5jcmVhdGVkID0gcmVzdWx0LnJlcy5jcmVhdGVkRGF0ZTtcblx0XHRcdFx0c3ViUHJvY2Vzc01vZGVsLmRhdGVzLnZhbGlkID0gcmVzdWx0LnJlcy52YWxpZERhdGU7XG5cdFx0XHRcdHN1YlByb2Nlc3NNb2RlbC5kYXRlcy5kdWUgPSByZXN1bHQucmVzLmR1ZURhdGU7XG5cdFx0XHRcdC8vIFByb2Nlc3MgdGhlIGZpcnN0IHN0ZXAgYW5kIGFueSBzdWJzZXF1ZW50ICdhdXRvJyBzdGVwXG5cdFx0XHRcdHZhciBmb3JtRGVmID0ge1xuXHRcdFx0XHRcdGlkOiBzdWJQcm9jZXNzLl9pZCxcblx0XHRcdFx0XHRuYW1lOiBzdWJQcm9jZXNzLm5hbWUuaTE4bi52YWx1ZSxcblx0XHRcdFx0XHRpbmRpY2F0b3JzOiBzdWJQcm9jZXNzLmluZGljYXRvcnNcblx0XHRcdFx0fVxuXHRcdFx0XHRzdGVwKHByb2Nlc3NJZCwgc3ViUHJvY2Vzcy5faWQsIHN1YlByb2Nlc3NNb2RlbCwgc3ViUHJvY2Vzcy5zdGVwc1swXSwgMCwgZm9ybURlZiwgaW5wdXREYXRhLCB3b3JrZmxvdykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHRcdFx0XHRcdGlmIChyZXN1bHQuY29tcGxldGUpIHtcblx0XHRcdFx0XHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdTdWItUHJvY2VzcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdC5yZXMpO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIGVycm9yID0gdXRpbC5lcnJvcignV0ZTdGVwRXJyb3InLCAnU3RlcCAnICsgc3ViUHJvY2Vzcy5zdGVwc1swXS5faWQgKyAnd2FzIG5vdCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIGZ1bmN0aW9uKGVycil7XG5cdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdH0pOyBcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBlcnJvciA9IHV0aWwuZXJyb3IoJ1dGU3ViUHJvY2Vzc0Vycm9yJywgJ1N1Yi1wcm9jZXNzOiAnICsgc3ViUHJvY2Vzcy5faWQrICcgbm90IGluaXRpYXRlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdHJlamVjdChlcnIpO1xuXHRcdH0pO1xuXHR9KTtcbn07XG5cbi8qKiBcbiAqIFByb2Nlc3MgaW5pdGlhdGVcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gaW5pdGlhdGUgLSB0aGUgaW5pdGlhdGUgY29uZmlnIGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dERhdGEgLSB0aGUgdXNlciBpbnB1dCBkYXRhXG4gKlxuICogQGV4YW1wbGUgXG4gKlxuICogQHJldHVybiBcbiAqXG4gKi9cbmZ1bmN0aW9uIGluaXRpYXRlKGluaXRpYXRlLCBpbnB1dERhdGEpe1xuXHR2YXIgY29tcGxldGVkID0gW107XG5cdHZhciByZXN1bHQgPSB7XG5cdFx0Y29tcGxldGU6IGZhbHNlXG5cdH07XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRzd2l0Y2goaW5pdGlhdGUuX3R5cGUpIHtcblx0XHRcdGNhc2UgJ3VzZXInOlxuXHRcdFx0XHQvLyBJZiB0aGUgc3ViUHJvY2VzcyBpbml0aWF0aW9uIGlzIHVzZXIgZGVmaW5lZCB0aGVuXG5cdFx0XHRcdHJlc3VsdC5jcmVhdGVkRGF0ZSA9IGlucHV0RGF0YS5jcmVhdGVkRGF0ZTtcblx0XHRcdFx0aWYgKGluaXRpYXRlLmRhdGVzLnZhbGlkLl90eXBlID09PSAndXNlclNlbGVjdGVkJykge1xuXHRcdFx0XHRcdGlmIChpbnB1dERhdGEudmFsaWREYXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdHJlc3VsdC52YWxpZERhdGUgPSBpbnB1dERhdGEudmFsaWREYXRlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgZXJyb3IgPSB1dGlsLmVycm9yKCdXRkluaXRpYXRlRXJyb3InLCAnTm8gdmFsaWQgZGF0ZSBwYXNzZWQgaW4gLSB7aW5wdXREYXRhLnZhbGlkRGF0ZX0nKTtcblx0XHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpbml0aWF0ZS5kYXRlcy5kdWUuX3R5cGUgPT09ICd1c2VyU2VsZWN0ZWQnKSB7XG5cdFx0XHRcdFx0aWYgKGlucHV0RGF0YS5kdWVEYXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdHJlc3VsdC5kdWVEYXRlID0gaW5wdXREYXRhLmR1ZURhdGU7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHV0aWwuZXJyb3IoJ1dGSW5pdGlhdGVFcnJvcicsICdObyBkdWUgZGF0ZSBwYXNzZWQgaW4gLSB7aW5wdXREYXRhLmR1ZURhdGV9Jyk7XG5cdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXN1bHQuY29tcGxldGUgPSB0cnVlO1xuXHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnU3ViLVByb2Nlc3MgaW5pdGlhdGUgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQpO1xuXHRcdFx0XHRyZXNvbHZlKHN1Y2Nlc3MpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHZhciBlcnJvciA9IHV0aWwuZXJyb3IoJ1dGSW5pdGlhdGVFcnJvcicsICdJbml0aWF0ZSB0eXBlOiAnICsgaW5pdGlhdGUuX3R5cGUgKyAnIG5vdCBkZWZpbmVkLicpO1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdH1cblx0fSk7XG59O1xuXG4vKiogXG4gKiBQcm9jZXNzIHN0ZXBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvY2Vzc0lkIC0gdGhlIGN1cnJlbnQgcHJvY2VzcyBpZFxuICogQHBhcmFtIHtzdHJpbmd9IHN1YlByb2Nlc3NJZCAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIGlkXG4gKiBAcGFyYW0ge29iamVjdH0gc3ViUHJvY2Vzc01vZGVsIC0gdGhlIGN1cnJlbnQgc3ViLXByb2Nlc3MgbW9kZWwgaW5zdGFuY2UgZGF0YVxuICogQHBhcmFtIHtvYmplY3R9IHN0ZXAgLSB0aGUgY3VycmVudCBzdWItcHJvY2VzcyBjb25maWcgZGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IHNlcSAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIHN0ZXAgaW5zdGFuY2UgY291bnRlciAvIHNlcXVlbmNlXG4gKiBAcGFyYW0ge29iamVjdH0gZm9ybURlZiAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIGZvcm0gY29uZmlnIGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dERhdGEgLSB0aGUgdXNlciBpbnB1dCBkYXRhXG4gKiBAcGFyYW0ge29iamVjdH0gd29ya2Zsb3cgLSB0aGUgY3VycmVudCB3b3JrZmxvdyBjb25zdHJ1Y3RvciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlIFxuICpcbiAqIEByZXR1cm4gXG4gKlxuICovXG5mdW5jdGlvbiBzdGVwKHByb2Nlc3NJZCwgc3ViUHJvY2Vzc0lkLCBzdWJQcm9jZXNzTW9kZWwsIHN0ZXAsIHNlcSwgZm9ybURlZiwgaW5wdXREYXRhLCB3b3JrZmxvdyl7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHQvLyBjb25zb2xlLmxvZyhzdGVwKTtcblx0XHQvLyBVcGRhdGUgdGhlIHN1Yi1wcm9jZXNzIHN0ZXAgZGF0YVxuXHRcdHN1YlByb2Nlc3NNb2RlbC5zdGVwLmlkID0gc3RlcC5faWQ7XG5cdFx0c3ViUHJvY2Vzc01vZGVsLnN0ZXAuc2VxID0gc2VxO1xuXHRcdHN1YlByb2Nlc3NNb2RlbC5zdGVwLnN0YXR1cyA9IHN0ZXAuX3NldEluc3RhbmNlU3RhdHVzVG87XG5cdFx0c3ViUHJvY2Vzc01vZGVsLnN0ZXAubWVzc2FnZSA9IHN0ZXAuX3NldFN0YXR1c01zZ1RvO1xuXHRcdHN1YlByb2Nlc3NNb2RlbC5zdGVwLm1lc3NhZ2UgPSBzdGVwLl9zZXRTdGF0dXNNc2dUbztcblx0XHRzdWJQcm9jZXNzTW9kZWwuc3RlcC5hc3NpZ25lZFRvLnVzZXJJZCA9IGlucHV0RGF0YS51c2VySWQ7XG5cdFx0c3ViUHJvY2Vzc01vZGVsLnN0ZXAuYXNzaWduZWRUby5uYW1lID0gaW5wdXREYXRhLm5hbWU7XG5cdFx0Ly8gSWYgYWN0aW9ucyBhcmUgc3ByZWNpZmllZCwgZXhlY3V0ZSB0aGVtXG5cdFx0aWYgKHN0ZXAuYWN0aW9uc1swXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRhY3Rpb25zKHN0ZXAuYWN0aW9ucywgZm9ybURlZiwgd29ya2Zsb3cpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdC8vIFRoZSBkb2N1bWVudCBwcm9jZXNzLnN0ZXAgbW9kZWxcblx0XHRcdCAgICB2YXIgZG9jdW1lbnRTdGVwTW9kZWwgPSB7XG5cdCAgICAgICAgICAgICAgICBcImlkXCI6IHN0ZXAuX2lkLFxuXHQgICAgICAgICAgICAgICAgXCJzZXFcIjogc2VxLFxuXHQgICAgICAgICAgICAgICAgXCJzdGFydERhdGVcIjogaW5wdXREYXRhLmNyZWF0ZWREYXRlLFxuXHQgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogc3RlcC5fc2V0SW5zdGFuY2VTdGF0dXNUbyxcblx0ICAgICAgICAgICAgICAgIFwibWVzc2FnZVwiOiBzdGVwLl9zZXRTdGF0dXNNc2dUbyxcblx0ICAgICAgICAgICAgICAgIFwiYXNzaWduZWRUb1wiOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgXCJ1c2VySWRcIjogaW5wdXREYXRhLnVzZXJJZCxcblx0ICAgICAgICAgICAgXHRcdFwibmFtZVwiOiBpbnB1dERhdGEubmFtZVxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIFwiY29tbWVudFwiOiBpbnB1dERhdGEuY29tbWVudCxcblx0ICAgICAgICAgICAgICAgIFwiY29tcGxldGVcIjogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBcImVuZERhdGVcIjogXCJcIlxuXHRcdCAgICAgICAgfTtcblx0XHRcdFx0dXRpbC5zeW5jTG9vcChkYXRhLnJlcy5kYXRhWzBdLmZvcm0uaW5kaWNhdG9ycy5sZW5ndGgsIGZ1bmN0aW9uKGxvb3Ape1xuXHRcdFx0XHRcdHZhciBjb3VudGVyID0gbG9vcC5pdGVyYXRpb24oKTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIHByb2Nlc3NlcyBpbnN0YW5jZSBtb2RlbCwgaW5pZGNhdG9ycyBzZWN0aW9uXG5cdFx0XHRcdFx0dmFyIGluZGljYXRvck1vZGVsID0ge1xuXHRcdFx0XHRcdFx0XCJpZFwiOiBkYXRhLnJlcy5kYXRhWzBdLmZvcm0uaW5kaWNhdG9yc1tjb3VudGVyXS5jYXRlZ29yeS50ZXJtLCBcblx0XHRcdFx0XHRcdFwiaW5zdGFuY2VzXCI6IFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFwidXVpZFwiOiBkYXRhLnJlcy5kYXRhWzBdLmZvcm0uaW5kaWNhdG9yc1tjb3VudGVyXS5faWQsIFxuXHRcdFx0XHRcdFx0XHRcdFwia2V5XCI6IFwiXCIsIFxuXHRcdFx0XHRcdFx0XHRcdFwic2VxXCI6IDEgICAgICAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGluZGljYXRvciBzZXQgZG9jdW1lbnRzIHdvcmtmbG93LnByb2Nlc3Nlcy5zdGVwIGRhdGFcblxuXHRcdFx0XHRcdGxvb3AubmV4dCgpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0IHNob3VsZCBhdXRvbWF0aWNhbGx5IHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdTdWJwcm9jZXNzIGluZGljYXRvcnMgdXBkYXRlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0aWYgKHN0ZXAuYWN0aW9uc1swXS50cmFuc2l0aW9ucy5sZW5ndGggIT09IDApIHtcblx0XHRcdFx0XHRcdHV0aWwuc3luY0xvb3Aoc3RlcC5hY3Rpb25zWzBdLnRyYW5zaXRpb25zLmxlbmd0aCwgZnVuY3Rpb24obG9vcCl7XG5cdFx0XHRcdFx0XHRcdHZhciBjb3VudGVyID0gbG9vcC5pdGVyYXRpb24oKTtcblx0XHRcdFx0XHRcdFx0dHJhbnNpdGlvbihwcm9jZXNzSWQsIHN1YlByb2Nlc3NJZCwgc3RlcC5faWQsIHN0ZXAuYWN0aW9uc1swXS50cmFuc2l0aW9uc1tjb3VudGVyXS5faWQsIHN1YlByb2Nlc3NNb2RlbCwgaW5wdXREYXRhLCB3b3JrZmxvdykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHRcdFx0XHRcdFx0XHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdUcmFuc2l0aW9uIHN0ZXAgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCBzdWJQcm9jZXNzTW9kZWwpO1xuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0XHRcdFx0XHRsb29wLmJyZWFrKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1x0XG5cdFx0XHRcdFx0XHRcdGxvb3AubmV4dCgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdObyB0cmFuc2l0aW9ucyBzcGVjaWZpZWQgaW4gdGhpcyBzdGVwLicpO1xuXHRcdFx0XHRcdFx0dmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MoJ05vIHRyYW5zaXRpb25zIHNwZWNpZmllZCBpbiB0aGlzIHN0ZXAuJywgc3ViUHJvY2Vzc01vZGVsKTtcblx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycil7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fSk7IFxuXHRcdFx0Ly8gdmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MoJ0FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdCk7XG5cdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlKHN1Y2Nlc3MpO1xuXHRcdH0gZWxzZSBpZiAoc3RlcC50YXNrICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdUYXNrIGF3YWl0aW5nIHVzZXIgYWN0aW9uLicsIHN1YlByb2Nlc3NNb2RlbCk7XG5cdFx0XHRyZXNvbHZlKHN1Y2Nlc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgZXJyb3IgPSB1dGlsLmVycm9yKCdXRjAxMycpO1xuXHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHR9XG5cdH0pO1xufTtcblxuLyoqIFxuICogUHJvY2VzcyBhY3Rpb25zXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGFjdGlvbnMgLSB0aGUgYWN0aW9ucyBjb25maWcgZGF0YVxuICogQHBhcmFtIHtvYmplY3R9IGZvcm1EZWYgLSB0aGUgY3VycmVudCBzdWItcHJvY2VzcyBmb3JtIGNvbmZpZyBkYXRhXG4gKiBAcGFyYW0ge29iamVjdH0gd29ya2Zsb3cgLSB0aGUgY3VycmVudCB3b3JrZmxvdyBjb25zdHJ1Y3RvciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlIFxuICpcbiAqIEByZXR1cm4gXG4gKlxuICovXG5mdW5jdGlvbiBhY3Rpb25zKGFjdGlvbnMsIGZvcm1EZWYsIHdvcmtmbG93KXtcblx0dmFyIGNvbXBsZXRlZCA9IFtdO1xuXHR2YXIgcmVzdWx0ID0ge1xuXHRcdGNvbXBsZXRlZDogdHJ1ZSxcblx0XHRkYXRhOiBbXVxuXHR9O1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0Ly8gY29uc29sZS5sb2coYWN0aW9ucyk7XG5cdFx0dXRpbC5zeW5jTG9vcChhY3Rpb25zLmxlbmd0aCwgZnVuY3Rpb24obG9vcCl7XG5cdFx0XHR2YXIgY291bnRlciA9IGxvb3AuaXRlcmF0aW9uKCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhjb3VudGVyKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGFjdGlvbnMubGVuZ3RoKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGFjdGlvbnNbY291bnRlcl0pO1xuXHRcdFx0YWN0aW9uKGFjdGlvbnNbY291bnRlcl0sIGZvcm1EZWYsIHdvcmtmbG93KS50aGVuKGZ1bmN0aW9uKGRhdGEpe1x0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiBhbGwgcHJlLXJlcXVpc2l0ZXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cblx0XHRcdFx0Ly8gY29uc29sZS5sb2coYWN0aW9uc1tjb3VudGVyXS5faWQgKyAnIGNvbXBsZXRlZC4nKSA7XG5cdFx0XHRcdGNvbXBsZXRlZC5wdXNoKGRhdGEuY29tcGxldGUpO1xuXHRcdFx0XHRyZXN1bHQuZGF0YS5wdXNoKGRhdGEucmVzKTtcblx0XHRcdFx0bG9vcC5uZXh0KCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0bG9vcC5icmVhaygpO1xuXHRcdFx0fSk7XG5cdFx0fSwgZnVuY3Rpb24oKXtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdMb29wIGRvbmUgZnVuY3Rpb24gY2FsbGVkLicpO1xuXHRcdFx0aWYgKGNvbXBsZXRlZC5ldmVyeShCb29sZWFuKSkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnQWN0aW9ucyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRyZXN1bHQuY29tcGxldGVkID0gdHJ1ZTtcblx0XHRcdFx0dmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MoJ0FjdGlvbnMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQpO1xuXHRcdFx0XHRyZXNvbHZlKHN1Y2Nlc3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ0FjdGlvbnMgZmFpbGVkLicpO1xuXHRcdFx0XHRyZXN1bHQuY29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHRcdHZhciBlcnIgPSB1dGlsLmVycm9yKCdXRkFjdGlvbnNFcnJvcicsJ0FjdGlvbi9zIGZvciBzdWItcHJvY2VzczogJyArIGZvcm1EZWYuaWQgKyAnIGRpZCBub3QgY29tcGxldGUgc3VjY2VmZnVsbHkuJyk7XG5cdFx0XHRcdHJlamVjdChzdWNjZXNzKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59O1xuXG4vKiogXG4gKiBQcm9jZXNzIGFjdGlvblxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBhY3Rpb24gLSB0aGUgYWN0aW9uIGNvbmZpZyBkYXRhXG4gKiBAcGFyYW0ge29iamVjdH0gZm9ybURlZiAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIGZvcm0gY29uZmlnIGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSB3b3JrZmxvdyAtIHRoZSBjdXJyZW50IHdvcmtmbG93IGNvbnN0cnVjdG9yIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGUgXG4gKlxuICogQHJldHVybiBcbiAqXG4gKi9cbmZ1bmN0aW9uIGFjdGlvbihhY3Rpb24sIGZvcm1EZWYsIHdvcmtmbG93KXtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdC8vIGNvbnNvbGUubG9nKGFjdGlvbik7XG5cdFx0c3dpdGNoKGFjdGlvbi5faWQpIHtcblx0XHRcdGNhc2UgJ2NyZWF0ZUZvcm0nOlxuXHRcdFx0XHRmb3JtLmNyZWF0ZShmb3JtRGVmLCB3b3JrZmxvdykudGhlbihmdW5jdGlvbihyZXN1bHQpe1x0XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uczogW10sXG5cdFx0XHRcdFx0XHRmb3JtOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiBmb3JtRGVmLmlkLFxuXHRcdFx0XHRcdFx0XHRpbmRpY2F0b3JzOiBbXVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhLnRyYW5zaXRpb25zID0gYWN0aW9uLnRyYW5zaXRpb25zO1xuXHRcdFx0XHRcdGRhdGEuZm9ybS5pbmRpY2F0b3JzID0gcmVzdWx0LnJlcztcblx0XHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcyhyZXN1bHQubWVzc2FnZSwgZGF0YSk7XG5cdFx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Ly8gY2FzZSAnc2F2ZUluZGljYXRvcic6XG5cdFx0XHRcdFxuXHRcdFx0Ly8gXHRicmVhaztcblx0XHRcdC8vIGNhc2UgJ3N1Ym1pdEZvcm0nOlxuXHRcdFx0XHRcblx0XHRcdC8vIFx0YnJlYWs7XG5cdFx0XHRjYXNlICdhdXRob3Jpc2VGb3JtJzpcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ0NhbGxpbmcgYXV0aG9yaXNlRm9ybSBhY3Rpb24nKTtcblx0XHRcdFx0Zm9ybS5hdXRob3Jpc2UoZm9ybURlZiwgd29ya2Zsb3cpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcdFxuXHRcdFx0XHRcdHZhciBkYXRhID0ge1xuXHRcdFx0XHRcdFx0dHJhbnNpdGlvbnM6IFtdLFxuXHRcdFx0XHRcdFx0Zm9ybToge1xuXHRcdFx0XHRcdFx0XHRpZDogZm9ybURlZi5pZCxcblx0XHRcdFx0XHRcdFx0aW5kaWNhdG9yczogW11cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGF0YS50cmFuc2l0aW9ucyA9IGFjdGlvbi50cmFuc2l0aW9ucztcblx0XHRcdFx0XHQvLyBkYXRhLmZvcm0uaW5kaWNhdG9ycyA9IHJlc3VsdC5yZXM7XG5cdFx0XHRcdFx0dmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MocmVzdWx0Lm1lc3NhZ2UsIGRhdGEpO1xuXHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdH0sIGZ1bmN0aW9uKGVycil7XG5cdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2Nsb3NlRm9ybSc6XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdDYWxsaW5nIGNsb3NlRm9ybSBhY3Rpb24nKTtcblx0XHRcdFx0Zm9ybS5jbG9zZShmb3JtRGVmLCB3b3JrZmxvdykudGhlbihmdW5jdGlvbihyZXN1bHQpe1x0XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uczogW10sXG5cdFx0XHRcdFx0XHRmb3JtOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiBmb3JtRGVmLmlkLFxuXHRcdFx0XHRcdFx0XHRpbmRpY2F0b3JzOiBbXVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhLnRyYW5zaXRpb25zID0gYWN0aW9uLnRyYW5zaXRpb25zO1xuXHRcdFx0XHRcdC8vIGRhdGEuZm9ybS5pbmRpY2F0b3JzID0gcmVzdWx0LnJlcztcblx0XHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcyhyZXN1bHQubWVzc2FnZSwgZGF0YSk7XG5cdFx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dmFyIGVycm9yID0gdXRpbC5lcnJvcignV0ZBY3Rpb25FcnJvcicsICdBY3Rpb24gZGVmaW5lZCB3aXRoIGlkOiAnICsgYWN0aW9uLl9pZCArICcgbm90IGZvdW5kLicpO1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdH1cblx0fSk7XG59O1xuXG4vKiogXG4gKiBQcm9jZXNzIHRhc2tcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gdGFzayAtIHRoZSB0YXNrIGNvbmZpZyBkYXRhXG4gKiBAcGFyYW0ge29iamVjdH0gaW5wdXREYXRhIC0gdGhlIHVzZXIgaW5wdXQgZGF0YVxuICpcbiAqIEBleGFtcGxlIFxuICpcbiAqIEByZXR1cm4gXG4gKlxuICovXG5mdW5jdGlvbiB0YXNrKHRhc2spe1xuXHRyZXR1cm4gJ0ltcGxlbWVudGF0aW9uIHBlbmRpbmcuLic7XG59O1xuXG4vKiogXG4gKiBQcm9jZXNzIHRyYW5zaXRpb25cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvY2Vzc0lkIC0gdGhlIGN1cnJlbnQgcHJvY2VzcyBpZFxuICogQHBhcmFtIHtzdHJpbmd9IHN1YlByb2Nlc3NJZCAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIGlkXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RlcElkIC0gdGhlIGN1cnJlbnQgc3ViLXByb2Nlc3Mgc3RlcCBpZFxuICogQHBhcmFtIHtzdHJpbmd9IHN0ZXBJZCAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIHN0ZXAgdHJhbnNpdGlvbiBpZFxuICogQHBhcmFtIHtvYmplY3R9IHN1YlByb2Nlc3NNb2RlbCAtIHRoZSBjdXJyZW50IHN1Yi1wcm9jZXNzIG1vZGVsIGluc3RhbmNlIGRhdGFcbiAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dERhdGEgLSB0aGUgdXNlciBpbnB1dCBkYXRhXG4gKiBAcGFyYW0ge29iamVjdH0gd29ya2Zsb3cgLSB0aGUgY3VycmVudCB3b3JrZmxvdyBjb25zdHJ1Y3RvciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlIFxuICpcbiAqIEByZXR1cm4gXG4gKlxuICovXG5mdW5jdGlvbiB0cmFuc2l0aW9uKHByb2Nlc3NJZCwgc3ViUHJvY2Vzc0lkLCBzdGVwSWQsIHRyYW5zaXRpb25JZCwgc3ViUHJvY2Vzc01vZGVsLCBpbnB1dERhdGEsIHdvcmtmbG93KXtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBjdXJyZW50UHJvY2VzcyA9IHdvcmtmbG93LmNvbmZpZy5wcm9jZXNzZXMuZmlsdGVyKGZ1bmN0aW9uKG9ialByb2Nlc3Mpe1xuXHRcdFx0aWYgKG9ialByb2Nlc3MuX2lkID09PSBwcm9jZXNzSWQpIHtcblx0XHRcdFx0cmV0dXJuIG9ialByb2Nlc3M7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dmFyIGN1cnJlbnRTdWJQcm9jZXNzID0gY3VycmVudFByb2Nlc3NbMF0uc3ViUHJvY2Vzc2VzLmZpbHRlcihmdW5jdGlvbihvYmpTdWJQcm9jZXNzKXtcblx0XHRcdGlmIChvYmpTdWJQcm9jZXNzLl9pZCA9PT0gc3ViUHJvY2Vzc0lkKSB7XG5cdFx0XHRcdHJldHVybiBvYmpTdWJQcm9jZXNzO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHZhciBjdXJyZW50U3RlcCA9IGN1cnJlbnRTdWJQcm9jZXNzWzBdLnN0ZXBzLmZpbHRlcihmdW5jdGlvbihvYmpTdGVwKXtcblx0XHRcdGlmIChvYmpTdGVwLl9pZCA9PT0gc3RlcElkKSB7XG5cdFx0XHRcdHJldHVybiBvYmpTdGVwO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHZhciB0cmFuc2l0aW9uID0ge307XG5cdFx0aWYgKGN1cnJlbnRTdGVwWzBdLmFjdGlvbnNbMF0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dHJhbnNpdGlvbiA9IGN1cnJlbnRTdGVwWzBdLmFjdGlvbnNbMF0udHJhbnNpdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKG9ialRyYW5zaXRpb24pe1xuXHRcdFx0XHRpZiAob2JqVHJhbnNpdGlvbi5faWQgPT09IHRyYW5zaXRpb25JZCkge1xuXHRcdFx0XHRcdHJldHVybiBvYmpUcmFuc2l0aW9uO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dHJhbnNpdGlvbiA9IGN1cnJlbnRTdGVwWzBdLnRhc2sudHJhbnNpdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKG9ialRyYW5zaXRpb24pe1xuXHRcdFx0XHRpZiAob2JqVHJhbnNpdGlvbi5faWQgPT09IHRyYW5zaXRpb25JZCkge1xuXHRcdFx0XHRcdHJldHVybiBvYmpUcmFuc2l0aW9uO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dmFyIHN0ZXBTZXEgPSAwO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVudFN1YlByb2Nlc3NbMF0uc3RlcHMubGVuZ3RoOyBpKyspe1xuXHRcdFx0aWYgKGN1cnJlbnRTdWJQcm9jZXNzWzBdLnN0ZXBzW2ldLl9pZCA9PT0gc3RlcElkKSB7XG5cdFx0XHRcdHN0ZXBTZXEgPSBpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR2YXIgbmV4dFN0ZXAgPSB7fTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGN1cnJlbnRTdWJQcm9jZXNzWzBdLnN0ZXBzLmxlbmd0aDsgaSsrKXtcblx0XHRcdHZhciBuZXh0U3RlcFNlcSA9IHN0ZXBTZXEgKyAxO1xuXHRcdFx0aWYgKGkgPT09IG5leHRTdGVwU2VxKSB7XG5cdFx0XHRcdG5leHRTdGVwID0gY3VycmVudFN1YlByb2Nlc3NbMF0uc3RlcHNbaV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKHRyYW5zaXRpb24pXG5cdFx0c3dpdGNoKHRyYW5zaXRpb25bMF0uX3R5cGUpIHtcblx0XHRcdGNhc2UgJ2F1dG8nOlxuXHRcdFx0XHRpZiAodHJhbnNpdGlvblswXS5nb1RvLl90eXBlID09PSAnbmV4dFN0ZXAnKSB7XG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2codHJhbnNpdGlvblswXS5nb1RvLl90eXBlKTtcblx0XHRcdFx0XHRzdGVwKHByb2Nlc3NJZCwgc3ViUHJvY2Vzc0lkLCBzdWJQcm9jZXNzTW9kZWwsIG5leHRTdGVwLCBzdGVwU2VxLCB7fSwgaW5wdXREYXRhLCB3b3JrZmxvdykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2cocmVzdWx0KTtcblx0XHRcdFx0XHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdTdGVwIHRyYW5zaXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQucmVzKTtcblx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0cmFuc2l0aW9uWzBdLl9zdG9wID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnQWxsIFN0ZXAgdHJhbnNpdGlvbnMgaGF2ZSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHt9KTtcblx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndXNlcic6XG5cdFx0XHRcdGlmICh0cmFuc2l0aW9uWzBdLmdvVG8uX3R5cGUgPT09ICduZXh0U3RlcCcpIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyh0cmFuc2l0aW9uWzBdLmdvVG8uX3R5cGUpO1xuXHRcdFx0XHRcdHN0ZXAocHJvY2Vzc0lkLCBzdWJQcm9jZXNzSWQsIHN1YlByb2Nlc3NNb2RlbCwgbmV4dFN0ZXAsIHN0ZXBTZXEsIHt9LCBpbnB1dERhdGEsIHdvcmtmbG93KS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhyZXN1bHQpO1xuXHRcdFx0XHRcdFx0dmFyIHN1Y2Nlc3MgPSB1dGlsLnN1Y2Nlc3MoJ1N0ZXAgdHJhbnNpdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHJlc3VsdC5yZXMpO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzKTtcblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodHJhbnNpdGlvblswXS5nb1RvLl90eXBlID09PSAnc3RlcElkJykge1xuXHRcdFx0XHRcdHZhciBnb1RvU3RlcElkID0gdHJhbnNpdGlvblswXS5nb1RvLl9zdGVwSWQ7XG5cdFx0XHRcdFx0dmFyIGdvVG9TdGVwID0gY3VycmVudFN1YlByb2Nlc3NbMF0uc3RlcHMuZmlsdGVyKGZ1bmN0aW9uKG9ialN0ZXApe1xuXHRcdFx0XHRcdFx0aWYgKG9ialN0ZXAuX2lkID09PSBnb1RvU3RlcElkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBvYmpTdGVwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHZhciBnb1RvU3RlcFNlcSA9IDE7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW50U3ViUHJvY2Vzc1swXS5zdGVwcy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudFN1YlByb2Nlc3NbMF0uc3RlcHNbaV0uX2lkID09PSBnb1RvU3RlcElkKSB7XG5cdFx0XHRcdFx0XHRcdGdvVG9TdGVwU2VxID0gaSArIDE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN0ZXAocHJvY2Vzc0lkLCBzdWJQcm9jZXNzSWQsIHN1YlByb2Nlc3NNb2RlbCwgZ29Ub1N0ZXBbMF0sIGdvVG9TdGVwU2VxLCB7fSwgaW5wdXREYXRhLCB3b3JrZmxvdykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2cocmVzdWx0KTtcblx0XHRcdFx0XHRcdHZhciBzdWNjZXNzID0gdXRpbC5zdWNjZXNzKCdTdGVwIHRyYW5zaXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4nLCByZXN1bHQucmVzKTtcblx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0cmFuc2l0aW9uWzBdLl9zdG9wID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnQWxsIFN0ZXAgdHJhbnNpdGlvbnMgaGF2ZSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHt9KTtcblx0XHRcdFx0XHRcdHJlc29sdmUoc3VjY2Vzcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYgKHRyYW5zaXRpb25bMF0uX3N0b3AgPT09IHRydWUpIHtcblx0XHRcdFx0XHR2YXIgc3VjY2VzcyA9IHV0aWwuc3VjY2VzcygnQWxsIFN0ZXAgdHJhbnNpdGlvbnMgaGF2ZSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicsIHt9KTtcblx0XHRcdFx0XHRyZXNvbHZlKHN1Y2Nlc3MpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBlcnJvciA9IHV0aWwuZXJyb3IoJ1dGMDA1Jyk7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdH1cblx0fSk7XG59O1xuXG4vKiogXG4gKiBQcm9jZXNzIHBvc3RBY3Rpb25zXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHBvc3RBY3Rpb25zIC0gdGhlIHBvc3RBY3Rpb25zIGNvbmZpZyBkYXRhXG4gKlxuICogQGV4YW1wbGUgXG4gKlxuICogQHJldHVybiBcbiAqXG4gKi9cbmZ1bmN0aW9uIHBvc3RBY3Rpb25zKHBvc3RBY3Rpb25zKXtcblx0cmV0dXJuICdJbXBsZW1lbnRhdGlvbiBwZW5kaW5nLi4nO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IFxuXG4gXHRwcmVSZXF1aXNpdGVzOiBwcmVSZXF1aXNpdGVzLFxuIFx0cHJlQWN0aW9uczogcHJlQWN0aW9ucyxcbiBcdHN1YlByb2Nlc3M6IHN1YlByb2Nlc3MsXG4gXHR0YXNrOiB0YXNrLFxuIFx0dHJhbnNpdGlvbjogdHJhbnNpdGlvblxuXG59IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFV0aWxpdHkgTW9kdWxlXG4gKlxuICogQG1vZHVsZSBtb2R1bGVzL3V0aWxcbiAqIEBhdXRob3IgQnJlbnQgR29yZG9uXG4gKiBAdmVyc2lvbiAyLjAuMFxuICogQGRlc2NyaXB0aW9uIFxuICogQGNvcHlyaWdodCBLd2FudHUgTHRkIFJTQSAyMDA5LTIwMTUuXG4gKlxuICovXG5cbiBtb2R1bGUuZXhwb3J0cyA9IHsgXG5cbiBcdHN1Y2Nlc3M6IGZ1bmN0aW9uKG1lc3NhZ2UsIHJlcyl7XG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRjb21wbGV0ZTogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdFx0XHRyZXM6IHJlc1xuXHRcdH1cblx0XHRyZXR1cm4gZGF0YTtcblx0fSxcblxuXHR3YXJuOiBmdW5jdGlvbihtZXNzYWdlLCByZXMpe1xuXHRcdHZhciBkYXRhID0ge1xuXHRcdFx0Y29tcGxldGU6IHRydWUsXG5cdFx0XHR3YXJuaW5nOiBtZXNzYWdlLFxuXHRcdFx0cmVzOiByZXNcblx0XHR9XG5cdFx0Y29uc29sZS53YXJuKGRhdGEpO1xuXHRcdHJldHVybiBkYXRhO1xuXHR9LFxuXG5cdGVycm9yOiBmdW5jdGlvbihjb2RlLCBtZXNzYWdlKXtcblx0XHR2YXIgZXJyID0gbmV3IEVycm9yKCcnKTtcblx0XHRlcnIubmFtZSA9IGNvZGU7XG5cdFx0ZXJyLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdHJldHVybiBlcnI7XG5cdH0sXG5cbiBcdHN5bmNMb29wOiBmdW5jdGlvbihpdGVyYXRpb25zLCBwcm9jZXNzLCBleGl0KXsgIFxuXHQgICAgdmFyIGluZGV4ID0gMCxcblx0ICAgICAgICBkb25lID0gZmFsc2UsXG5cdCAgICAgICAgc2hvdWxkRXhpdCA9IGZhbHNlO1xuXHQgICAgdmFyIGxvb3AgPSB7XG5cdCAgICAgICAgbmV4dDpmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBpZihkb25lKXtcblx0ICAgICAgICAgICAgICAgIGlmKHNob3VsZEV4aXQgJiYgZXhpdCl7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4aXQoKTsgLy8gRXhpdCBpZiB3ZSdyZSBkb25lXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgLy8gSWYgd2UncmUgbm90IGZpbmlzaGVkXG5cdCAgICAgICAgICAgIGlmKGluZGV4IDwgaXRlcmF0aW9ucyl7XG5cdCAgICAgICAgICAgICAgICBpbmRleCsrOyAvLyBJbmNyZW1lbnQgb3VyIGluZGV4XG5cdCAgICAgICAgICAgICAgICBwcm9jZXNzKGxvb3ApOyAvLyBSdW4gb3VyIHByb2Nlc3MsIHBhc3MgaW4gdGhlIGxvb3Bcblx0ICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHdlJ3JlIGRvbmVcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlOyAvLyBNYWtlIHN1cmUgd2Ugc2F5IHdlJ3JlIGRvbmVcblx0ICAgICAgICAgICAgICAgIGlmKGV4aXQpIGV4aXQoKTsgLy8gQ2FsbCB0aGUgY2FsbGJhY2sgb24gZXhpdFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBpdGVyYXRpb246ZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgcmV0dXJuIGluZGV4IC0gMTsgLy8gUmV0dXJuIHRoZSBsb29wIG51bWJlciB3ZSdyZSBvblxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgYnJlYWs6ZnVuY3Rpb24oZW5kKXtcblx0ICAgICAgICAgICAgZG9uZSA9IHRydWU7IC8vIEVuZCB0aGUgbG9vcFxuXHQgICAgICAgICAgICBzaG91bGRFeGl0ID0gZW5kOyAvLyBQYXNzaW5nIGVuZCBhcyB0cnVlIG1lYW5zIHdlIHN0aWxsIGNhbGwgdGhlIGV4aXQgY2FsbGJhY2tcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgbG9vcC5uZXh0KCk7XG5cdCAgICByZXR1cm4gbG9vcDtcblx0fSxcblxuXHRjb21wYXJlOiBmdW5jdGlvbihzdWJqZWN0LCBvcGVyYXRvciwgdmFsdWUpIHtcblx0ICBcdHN3aXRjaCAob3BlcmF0b3IpIHtcblx0ICBcdFx0Y2FzZSAnZ3JlYXRlclRoYW4nOiAgIFx0IFxuXHRcdFx0XHRyZXR1cm4gc3ViamVjdCA+IHZhbHVlO1xuXHRcdFx0Y2FzZSAnbGVzc1RoYW4nOiAgIFx0XHQgXG5cdFx0XHRcdHJldHVybiBzdWJqZWN0IDwgdmFsdWU7XG5cdFx0XHRjYXNlICdncmVhdGVyVGhhbkVxdWFsJzogXG5cdFx0XHRcdHJldHVybiBzdWJqZWN0ID49IHZhbHVlO1xuXHRcdFx0Y2FzZSAnbGVzc1RoYW5FcXVhbCc6ICBcdCBcblx0XHRcdFx0cmV0dXJuIHN1YmplY3QgPD0gdmFsdWU7XG5cdFx0XHRjYXNlICdlcXVhbFRvJzogXHRcdCBcblx0XHRcdFx0cmV0dXJuIHN1YmplY3QgPT09IHZhbHVlO1xuXHRcdFx0Y2FzZSAnbm90RXF1YWxUbyc6IFx0XHQgXG5cdFx0XHRcdHJldHVybiBzdWJqZWN0ICE9PSB2YWx1ZTtcblx0ICBcdH1cblx0fVxuXHRcbiB9Il19
